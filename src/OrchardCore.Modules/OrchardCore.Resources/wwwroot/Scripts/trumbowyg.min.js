jQuery.trumbowyg={langs:{en:{viewHTML:"View HTML",undo:"Undo",redo:"Redo",formatting:"Formatting",p:"Paragraph",blockquote:"Quote",code:"Code",header:"Header",bold:"Bold",italic:"Italic",strikethrough:"Stroke",underline:"Underline",strong:"Strong",em:"Emphasis",del:"Deleted",superscript:"Superscript",subscript:"Subscript",unorderedList:"Unordered list",orderedList:"Ordered list",insertImage:"Insert Image",link:"Link",createLink:"Insert link",unlink:"Remove link",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",horizontalRule:"Insert horizontal rule",removeformat:"Remove format",fullscreen:"Fullscreen",close:"Close",submit:"Confirm",reset:"Cancel",required:"Required",description:"Description",title:"Title",text:"Text",target:"Target",width:"Width"}},plugins:{},svgPath:null,hideButtonTexts:null},Object.defineProperty(jQuery.trumbowyg,"defaultOptions",{value:{lang:"en",fixedBtnPane:!1,fixedFullWidth:!1,autogrow:!1,autogrowOnEnter:!1,imageWidthModalEdit:!1,prefix:"trumbowyg-",semantic:!0,resetCss:!1,removeformatPasted:!1,tagsToRemove:[],tagsToKeep:["hr","img","embed","iframe","input"],btns:[["viewHTML"],["historyUndo","historyRedo"],["formatting"],["fontsize","fontfamily"],["strong","em","del"],["foreColor","backColor"],["superscript","subscript"],["link"],["image"],["align"],["table"],["unorderedList","orderedList"],["horizontalRule"],["preformatted"],["removeformat"],["fullscreen"]],btnsDef:{align:{dropdown:["justifyLeft","justifyCenter","justifyRight","justifyFull"],ico:"justifyLeft"},image:{dropdown:["insertImage","base64","noembed"],ico:"insertImage"}},inlineElementsSelector:"a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u",pasteHandlers:[],plugins:{},urlProtocol:!1,minimalLinks:!1},writable:!1,enumerable:!0,configurable:!1}),function(g,p,m,b){"use strict";var c="tbwconfirm",u="tbwcancel";b.fn.trumbowyg=function(e,t){var n="trumbowyg";if(e===Object(e)||!e)return this.each(function(){b(this).data(n)||b(this).data(n,new a(this,e))});if(1===this.length)try{var o=b(this).data(n);switch(e){case"execCmd":return o.execCmd(t.cmd,t.param,t.forceCss);case"openModal":return o.openModal(t.title,t.content);case"closeModal":return o.closeModal();case"openModalInsert":return o.openModalInsert(t.title,t.fields,t.callback);case"saveRange":return o.saveRange();case"getRange":return o.range;case"getRangeText":return o.getRangeText();case"restoreRange":return o.restoreRange();case"enable":return o.setDisabled(!1);case"disable":return o.setDisabled(!0);case"toggle":return o.toggle();case"destroy":return o.destroy();case"empty":return o.empty();case"html":return o.html(t)}}catch(e){}return!1};var a=function(e,t){var n=this,o="trumbowyg-icons",a=b.trumbowyg;n.doc=e.ownerDocument||m,n.$ta=b(e),n.$c=b(e),null!=(t=t||{}).lang||null!=a.langs[t.lang]?n.lang=b.extend(!0,{},a.langs.en,a.langs[t.lang]):n.lang=a.langs.en,n.hideButtonTexts=null!=a.hideButtonTexts?a.hideButtonTexts:t.hideButtonTexts;var r=null!=a.svgPath?a.svgPath:t.svgPath;if(n.hasSvg=!1!==r,n.svgPath=n.doc.querySelector("base")?p.location.href.split("#")[0]:"",0===b("#"+o,n.doc).length&&!1!==r){if(null==r){for(var i=m.getElementsByTagName("script"),l=0;l<i.length;l+=1){var s=i[l].src,d=s.match("trumbowyg(.min)?.js");null!=d&&(r=s.substring(0,s.indexOf(d[0]))+"ui/icons.svg")}null==r&&console.warn("You must define svgPath: https://goo.gl/CfTY9U")}var c=n.doc.createElement("div");c.id=o,n.doc.body.insertBefore(c,n.doc.body.childNodes[0]),b.ajax({async:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"xml",crossDomain:!0,url:r,data:null,beforeSend:null,complete:null,success:function(e){c.innerHTML=(new XMLSerializer).serializeToString(e.documentElement)}})}var u=n.lang.header,f=function(){return(p.chrome||p.Intl&&Intl.v8BreakIterator)&&"CSS"in p};n.btnsDef={viewHTML:{fn:"toggle",class:"trumbowyg-not-disable"},undo:{isSupported:f,key:"Z"},redo:{isSupported:f,key:"Y"},p:{fn:"formatBlock"},blockquote:{fn:"formatBlock"},h1:{fn:"formatBlock",title:u+" 1"},h2:{fn:"formatBlock",title:u+" 2"},h3:{fn:"formatBlock",title:u+" 3"},h4:{fn:"formatBlock",title:u+" 4"},subscript:{tag:"sub"},superscript:{tag:"sup"},bold:{key:"B",tag:"b"},italic:{key:"I",tag:"i"},underline:{tag:"u"},strikethrough:{tag:"strike"},strong:{fn:"bold",key:"B"},em:{fn:"italic",key:"I"},del:{fn:"strikethrough"},createLink:{key:"K",tag:"a"},unlink:{},insertImage:{},justifyLeft:{tag:"left",forceCss:!0},justifyCenter:{tag:"center",forceCss:!0},justifyRight:{tag:"right",forceCss:!0},justifyFull:{tag:"justify",forceCss:!0},unorderedList:{fn:"insertUnorderedList",tag:"ul"},orderedList:{fn:"insertOrderedList",tag:"ol"},horizontalRule:{fn:"insertHorizontalRule"},removeformat:{},fullscreen:{class:"trumbowyg-not-disable"},close:{fn:"destroy",class:"trumbowyg-not-disable"},formatting:{dropdown:["p","blockquote","h1","h2","h3","h4"],ico:"p"},link:{dropdown:["createLink","unlink"]}},n.o=b.extend(!0,{},a.defaultOptions,t),n.o.hasOwnProperty("imgDblClickHandler")||(n.o.imgDblClickHandler=n.getDefaultImgDblClickHandler()),n.urlPrefix=n.setupUrlPrefix(),n.disabled=n.o.disabled||"TEXTAREA"===e.nodeName&&e.disabled,t.btns?n.o.btns=t.btns:n.o.semantic||(n.o.btns[3]=["bold","italic","underline","strikethrough"]),b.each(n.o.btnsDef,function(e,t){n.addBtnDef(e,t)}),n.eventNamespace="trumbowyg-event",n.keys=[],n.tagToButton={},n.tagHandlers=[],n.pasteHandlers=[].concat(n.o.pasteHandlers),n.isIE=-1!==g.userAgent.indexOf("MSIE")||-1!==g.appVersion.indexOf("Trident/"),n.init()};a.prototype={DEFAULT_SEMANTIC_MAP:{b:"strong",i:"em",s:"del",strike:"del",div:"p"},init:function(){var e=this;e.height=e.$ta.height(),e.initPlugins();try{e.doc.execCommand("enableObjectResizing",!1,!1),e.doc.execCommand("defaultParagraphSeparator",!1,"p")}catch(e){}e.buildEditor(),e.buildBtnPane(),e.fixedBtnPaneEvents(),e.buildOverlay(),setTimeout(function(){e.disabled&&e.setDisabled(!0),e.$c.trigger("tbwinit")})},addBtnDef:function(e,t){this.btnsDef[e]=t},setupUrlPrefix:function(){var e=this.o.urlProtocol;if(e)return"string"!=typeof e?"https://":/:\/\/$/.test(e)?e:e+"://"},buildEditor:function(){var o=this,t=o.o.prefix,e="";o.$box=b("<div/>",{class:t+"box "+t+"editor-visible "+t+o.o.lang+" trumbowyg"}),o.isTextarea=o.$ta.is("textarea"),o.isTextarea?(e=o.$ta.val(),o.$ed=b("<div/>"),o.$box.insertAfter(o.$ta).append(o.$ed,o.$ta)):(o.$ed=o.$ta,e=o.$ed.html(),o.$ta=b("<textarea/>",{name:o.$ta.attr("id"),height:o.height}).val(e),o.$box.insertAfter(o.$ed).append(o.$ta,o.$ed),o.syncCode()),o.$ta.addClass(t+"textarea").attr("tabindex",-1),o.$ed.addClass(t+"editor").attr({contenteditable:!0,dir:o.lang._dir||"ltr"}).html(e),o.o.tabindex&&o.$ed.attr("tabindex",o.o.tabindex),o.$c.is("[placeholder]")&&o.$ed.attr("placeholder",o.$c.attr("placeholder")),o.$c.is("[spellcheck]")&&o.$ed.attr("spellcheck",o.$c.attr("spellcheck")),o.o.resetCss&&o.$ed.addClass(t+"reset-css"),o.o.autogrow||o.$ta.add(o.$ed).css({height:o.height}),o.semanticCode(),o.o.autogrowOnEnter&&o.$ed.addClass(t+"autogrow-on-enter");var n,a=!1,r=!1;o.$ed.on("dblclick","img",o.o.imgDblClickHandler).on("keydown",function(e){if((e.ctrlKey||e.metaKey)&&!e.altKey){a=!0;var t=o.keys[String.fromCharCode(e.which).toUpperCase()];try{return o.execCmd(t.fn,t.param),!1}catch(e){}}}).on("compositionstart compositionupdate",function(){r=!0}).on("keyup compositionend",function(e){if("compositionend"===e.type)r=!1;else if(r)return;var t=e.which;if(!(37<=t&&t<=40)){if(!e.ctrlKey&&!e.metaKey||89!==t&&90!==t)if(a||17===t)void 0===e.which&&o.semanticCode(!1,!1,!0);else{var n=!o.isIE||"compositionend"===e.type;o.semanticCode(!1,n&&13===t),o.$c.trigger("tbwchange")}else o.$c.trigger("tbwchange");setTimeout(function(){a=!1},50)}}).on("mouseup keydown keyup",function(e){(!e.ctrlKey&&!e.metaKey||e.altKey)&&setTimeout(function(){a=!1},50),clearTimeout(n),n=setTimeout(function(){o.updateButtonPaneStatus()},50)}).on("focus blur",function(e){if(o.$c.trigger("tbw"+e.type),"blur"===e.type&&b("."+t+"active-button",o.$btnPane).removeClass(t+"active-button "+t+"active"),o.o.autogrowOnEnter){if(o.autogrowOnEnterDontClose)return;"focus"===e.type?(o.autogrowOnEnterWasFocused=!0,o.autogrowEditorOnEnter()):o.o.autogrow||(o.$ed.css({height:o.$ed.css("min-height")}),o.$c.trigger("tbwresize"))}}).on("cut drop",function(){setTimeout(function(){o.semanticCode(!1,!0),o.$c.trigger("tbwchange")},0)}).on("paste",function(n){if(o.o.removeformatPasted){n.preventDefault(),p.getSelection&&p.getSelection().deleteFromDocument&&p.getSelection().deleteFromDocument();try{var t=p.clipboardData.getData("Text");try{o.doc.selection.createRange().pasteHTML(t)}catch(e){o.doc.getSelection().getRangeAt(0).insertNode(o.doc.createTextNode(t))}o.$c.trigger("tbwchange",n)}catch(e){o.execCmd("insertText",(n.originalEvent||n).clipboardData.getData("text/plain"))}}b.each(o.pasteHandlers,function(e,t){t(n)}),setTimeout(function(){o.semanticCode(!1,!0),o.$c.trigger("tbwpaste",n),o.$c.trigger("tbwchange")},0)}),o.$ta.on("keyup",function(){o.$c.trigger("tbwchange")}).on("paste",function(){setTimeout(function(){o.$c.trigger("tbwchange")},0)}),o.$box.on("keydown",function(e){if(27===e.which&&1===b("."+t+"modal-box",o.$box).length)return o.closeModal(),!1})},autogrowEditorOnEnter:function(){var e=this;e.$ed.removeClass("autogrow-on-enter");var t=e.$ed[0].clientHeight;e.$ed.height("auto");var n=e.$ed[0].scrollHeight;e.$ed.addClass("autogrow-on-enter"),t!==n&&(e.$ed.height(t),setTimeout(function(){e.$ed.css({height:n}),e.$c.trigger("tbwresize")},0))},buildBtnPane:function(){var o=this,a=o.o.prefix,r=o.$btnPane=b("<div/>",{class:a+"button-pane"});b.each(o.o.btns,function(e,t){b.isArray(t)||(t=[t]);var n=b("<div/>",{class:a+"button-group "+(0<=t.indexOf("fullscreen")?a+"right":"")});b.each(t,function(e,t){try{o.isSupportedBtn(t)&&n.append(o.buildBtn(t))}catch(e){}}),0<n.html().trim().length&&r.append(n)}),o.$box.prepend(r)},buildBtn:function(e){var n=this,t=n.o.prefix,o=n.btnsDef[e],a=o.dropdown,r=null==o.hasIcon||o.hasIcon,i=n.lang[e]||e,l=b("<button/>",{type:"button",class:t+e+"-button "+(o.class||"")+(r?"":" "+t+"textual-button"),html:n.hasSvg&&r?'<svg><use xlink:href="'+n.svgPath+"#"+t+(o.ico||e).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>':n.hideButtonTexts?"":o.text||o.title||n.lang[e]||e,title:(o.title||o.text||i)+(o.key?" (Ctrl + "+o.key+")":""),tabindex:-1,mousedown:function(){return a&&!b("."+e+"-"+t+"dropdown",n.$box).is(":hidden")||b("body",n.doc).trigger("mousedown"),(!n.$btnPane.hasClass(t+"disable")&&!n.$box.hasClass(t+"disabled")||b(this).hasClass(t+"active")||b(this).hasClass(t+"not-disable"))&&n.execCmd((!a?o.fn:"dropdown")||e,o.param||e,o.forceCss),!1}});if(a){l.addClass(t+"open-dropdown");var s=t+"dropdown",d={class:s+"-"+e+" "+s+" "+t+"fixed-top"};d["data-"+s]=e;var c=b("<div/>",d);b.each(a,function(e,t){n.btnsDef[t]&&n.isSupportedBtn(t)&&c.append(n.buildSubBtn(t))}),n.$box.append(c.hide())}else o.key&&(n.keys[o.key]={fn:o.fn||e,param:o.param||e});return a||(n.tagToButton[(o.tag||e).toLowerCase()]=e),l},buildSubBtn:function(e){var t=this,n=t.o.prefix,o=t.btnsDef[e],a=null==o.hasIcon||o.hasIcon;return o.key&&(t.keys[o.key]={fn:o.fn||e,param:o.param||e}),t.tagToButton[(o.tag||e).toLowerCase()]=e,b("<button/>",{type:"button",class:n+e+"-dropdown-button"+(o.ico?" "+n+o.ico+"-button":""),html:t.hasSvg&&a?'<svg><use xlink:href="'+t.svgPath+"#"+n+(o.ico||e).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>'+(o.text||o.title||t.lang[e]||e):o.text||o.title||t.lang[e]||e,title:o.key?" (Ctrl + "+o.key+")":null,style:o.style||null,mousedown:function(){return b("body",t.doc).trigger("mousedown"),t.execCmd(o.fn||e,o.param||e,o.forceCss),!1}})},isSupportedBtn:function(e){try{return this.btnsDef[e].isSupported()}catch(e){}return!0},buildOverlay:function(){return this.$overlay=b("<div/>",{class:this.o.prefix+"overlay"}).appendTo(this.$box),this.$overlay},showOverlay:function(){b(p).trigger("scroll"),this.$overlay.fadeIn(200),this.$box.addClass(this.o.prefix+"box-blur")},hideOverlay:function(){this.$overlay.fadeOut(50),this.$box.removeClass(this.o.prefix+"box-blur")},fixedBtnPaneEvents:function(){var a=this,r=a.o.fixedFullWidth,i=a.$box;a.o.fixedBtnPane&&(a.isFixed=!1,b(p).on("scroll."+a.eventNamespace+" resize."+a.eventNamespace,function(){if(i){a.syncCode();var e=b(p).scrollTop(),t=i.offset().top+1,n=a.$btnPane,o=n.outerHeight()-2;0<e-t&&e-t-a.height<0?(a.isFixed||(a.isFixed=!0,n.css({position:"fixed",top:0,left:r?"0":"auto",zIndex:7}),b([a.$ta,a.$ed]).css({marginTop:n.height()})),n.css({width:r?"100%":i.width()-1+"px"}),b("."+a.o.prefix+"fixed-top",i).css({position:r?"fixed":"absolute",top:r?o:o+(e-t)+"px",zIndex:15})):a.isFixed&&(a.isFixed=!1,n.removeAttr("style"),b([a.$ta,a.$ed]).css({marginTop:0}),b("."+a.o.prefix+"fixed-top",i).css({position:"absolute",top:o}))}}))},setDisabled:function(e){var t=this,n=t.o.prefix;(t.disabled=e)?t.$ta.attr("disabled",!0):t.$ta.removeAttr("disabled"),t.$box.toggleClass(n+"disabled",e),t.$ed.attr("contenteditable",!e)},destroy:function(){var e=this,t=e.o.prefix;e.isTextarea?e.$box.after(e.$ta.css({height:""}).val(e.html()).removeClass(t+"textarea").show()):e.$box.after(e.$ed.css({height:""}).removeClass(t+"editor").removeAttr("contenteditable").removeAttr("dir").html(e.html()).show()),e.$ed.off("dblclick","img"),e.destroyPlugins(),e.$box.remove(),e.$c.removeData("trumbowyg"),b("body").removeClass(t+"body-fullscreen"),e.$c.trigger("tbwclose"),b(p).off("scroll."+e.eventNamespace+" resize."+e.eventNamespace)},empty:function(){this.$ta.val(""),this.syncCode(!0)},toggle:function(){var e=this,t=e.o.prefix;e.o.autogrowOnEnter&&(e.autogrowOnEnterDontClose=!e.$box.hasClass(t+"editor-hidden")),e.semanticCode(!1,!0),setTimeout(function(){e.doc.activeElement.blur(),e.$box.toggleClass(t+"editor-hidden "+t+"editor-visible"),e.$btnPane.toggleClass(t+"disable"),b("."+t+"viewHTML-button",e.$btnPane).toggleClass(t+"active"),e.$box.hasClass(t+"editor-visible")?e.$ta.attr("tabindex",-1):e.$ta.removeAttr("tabindex"),e.o.autogrowOnEnter&&!e.autogrowOnEnterDontClose&&e.autogrowEditorOnEnter()},0)},dropdown:function(e){var t=this,n=t.doc,o=t.o.prefix,a=b("[data-"+o+"dropdown="+e+"]",t.$box),r=b("."+o+e+"-button",t.$btnPane),i=a.is(":hidden");if(b("body",n).trigger("mousedown"),i){var l=r.offset().left;r.addClass(o+"active"),a.css({position:"absolute",top:r.offset().top-t.$btnPane.offset().top+r.outerHeight(),left:t.o.fixedFullWidth&&t.isFixed?l+"px":l-t.$btnPane.offset().left+"px"}).show(),b(p).trigger("scroll"),b("body",n).on("mousedown."+t.eventNamespace,function(e){a.is(e.target)||(b("."+o+"dropdown",t.$box).hide(),b("."+o+"active",t.$btnPane).removeClass(o+"active"),b("body",n).off("mousedown."+t.eventNamespace))})}},html:function(e){var t=this;return null!=e?(t.$ta.val(e),t.syncCode(!0),t.$c.trigger("tbwchange"),t):t.$ta.val()},syncTextarea:function(){var e=this;e.$ta.val(0<e.$ed.text().trim().length||0<e.$ed.find(e.o.tagsToKeep.join(",")).length?e.$ed.html():"")},syncCode:function(e){var t=this;if(!e&&t.$ed.is(":visible"))t.syncTextarea();else{var n=b("<div>").html(t.$ta.val()),o=b("<div>").append(n);b(t.o.tagsToRemove.join(","),o).remove(),t.$ed.html(o.contents().html())}if(t.o.autogrow&&(t.height=t.$ed.height(),t.height!==t.$ta.css("height")&&(t.$ta.css({height:t.height}),t.$c.trigger("tbwresize"))),t.o.autogrowOnEnter){t.$ed.height("auto");var a=t.autogrowOnEnterWasFocused?t.$ed[0].scrollHeight:t.$ed.css("min-height");a!==t.$ta.css("height")&&(t.$ed.css({height:a}),t.$c.trigger("tbwresize"))}},semanticCode:function(e,t,n){var o=this;if(o.saveRange(),o.syncCode(e),o.o.semantic){if(o.semanticTag("b"),o.semanticTag("i"),o.semanticTag("s"),o.semanticTag("strike"),t){var a=o.o.inlineElementsSelector,r=":not("+a+")";o.$ed.contents().filter(function(){return 3===this.nodeType&&0<this.nodeValue.trim().length}).wrap("<span data-tbw/>");var i=function(e){if(0!==e.length){var t=e.nextUntil(r).addBack().wrapAll("<p/>").parent(),n=t.nextAll(a).first();t.next("br").remove(),i(n)}};i(o.$ed.children(a).first()),o.semanticTag("div",!0),o.$ed.find("p").filter(function(){return(!o.range||this!==o.range.startContainer)&&(0===b(this).text().trim().length&&0===b(this).children().not("br,span").length)}).contents().unwrap(),b("[data-tbw]",o.$ed).contents().unwrap(),o.$ed.find("p:empty").remove()}n||o.restoreRange(),o.syncTextarea()}},semanticTag:function(e,t){var n;if(null!=this.o.semantic&&"object"==typeof this.o.semantic&&this.o.semantic.hasOwnProperty(e))n=this.o.semantic[e];else{if(!0!==this.o.semantic||!this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(e))return;n=this.DEFAULT_SEMANTIC_MAP[e]}b(e,this.$ed).each(function(){var e=b(this);if(0===e.contents().length)return!1;e.wrap("<"+n+"/>"),t&&b.each(e.prop("attributes"),function(){e.parent().attr(this.name,this.value)}),e.contents().unwrap()})},createLink:function(){for(var e,t,n,o=this,a=o.doc.getSelection(),r=a.focusNode,i=(new XMLSerializer).serializeToString(a.getRangeAt(0).cloneContents());["A","DIV"].indexOf(r.nodeName)<0;)r=r.parentNode;if(r&&"A"===r.nodeName){var l=b(r);i=l.text(),e=l.attr("href"),o.o.minimalLinks||(t=l.attr("title"),n=l.attr("target"));var s=o.doc.createRange();s.selectNode(r),a.removeAllRanges(),a.addRange(s)}o.saveRange();var d={url:{label:"URL",required:!0,value:e},text:{label:o.lang.text,value:i}};o.o.minimalLinks||Object.assign(d,{title:{label:o.lang.title,value:t},target:{label:o.lang.target,value:n}}),o.openModalInsert(o.lang.createLink,d,function(e){var t=o.prependUrlPrefix(e.url);if(!t.length)return!1;var n=b(['<a href="',t,'">',e.text||e.url,"</a>"].join(""));return o.o.minimalLinks||(0<e.title.length&&n.attr("title",e.title),0<e.target.length&&n.attr("target",e.target)),o.range.deleteContents(),o.range.insertNode(n[0]),o.syncCode(),o.$c.trigger("tbwchange"),!0})},prependUrlPrefix:function(e){if(!this.urlPrefix)return e;if(/^([a-z][-+.a-z0-9]*:|\/|#)/i.test(e))return e;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"mailto:"+e:this.urlPrefix+e},unlink:function(){var e=this.doc.getSelection(),t=e.focusNode;if(e.isCollapsed){for(;["A","DIV"].indexOf(t.nodeName)<0;)t=t.parentNode;if(t&&"A"===t.nodeName){var n=this.doc.createRange();n.selectNode(t),e.removeAllRanges(),e.addRange(n)}}this.execCmd("unlink",void 0,void 0,!0)},insertImage:function(){var n=this;n.saveRange();var e={url:{label:"URL",required:!0},alt:{label:n.lang.description,value:n.getRangeText()}};n.o.imageWidthModalEdit&&(e.width={}),n.openModalInsert(n.lang.insertImage,e,function(e){n.execCmd("insertImage",e.url,!1,!0);var t=b('img[src="'+e.url+'"]:not([alt])',n.$box);return t.attr("alt",e.alt),n.o.imageWidthModalEdit&&t.attr({width:e.width}),n.syncCode(),n.$c.trigger("tbwchange"),!0})},fullscreen:function(){var e,t=this.o.prefix,n=t+"fullscreen";this.$box.toggleClass(n),e=this.$box.hasClass(n),b("body").toggleClass(t+"body-fullscreen",e),b(p).trigger("scroll"),this.$c.trigger("tbw"+(e?"open":"close")+"fullscreen")},execCmd:function(t,n,e,o){var a=this;o=!!o||"","dropdown"!==t&&a.$ed.focus();try{a.doc.execCommand("styleWithCSS",!1,e||!1)}catch(e){}try{a[t+o](n)}catch(e){try{t(n)}catch(e){"insertHorizontalRule"===t?n=void 0:"formatBlock"===t&&a.isIE&&(n="<"+n+">"),a.doc.execCommand(t,!1,n),a.syncCode(),a.semanticCode(!1,!0)}"dropdown"!==t&&(a.updateButtonPaneStatus(),a.$c.trigger("tbwchange"))}},openModal:function(e,t){var n=this,o=n.o.prefix;if(0<b("."+o+"modal-box",n.$box).length)return!1;n.o.autogrowOnEnter&&(n.autogrowOnEnterDontClose=!0),n.saveRange(),n.showOverlay(),n.$btnPane.addClass(o+"disable");var a=b("<div/>",{class:o+"modal "+o+"fixed-top"}).css({top:n.$box.offset().top+n.$btnPane.height(),zIndex:99999}).appendTo(b(n.doc.body));n.$overlay.one("click",function(){return a.trigger(u),!1});var r=b("<form/>",{action:"",html:t}).on("submit",function(){return a.trigger(c),!1}).on("reset",function(){return a.trigger(u),!1}).on("submit reset",function(){n.o.autogrowOnEnter&&(n.autogrowOnEnterDontClose=!1)}),i=b("<div/>",{class:o+"modal-box",html:r}).css({top:"-"+n.$btnPane.outerHeight()+"px",opacity:0}).appendTo(a).animate({top:0,opacity:1},100);return b("<span/>",{text:e,class:o+"modal-title"}).prependTo(i),a.height(i.outerHeight()+10),b("input:first",i).focus(),n.buildModalBtn("submit",i),n.buildModalBtn("reset",i),b(p).trigger("scroll"),a},buildModalBtn:function(e,t){var n=this.o.prefix;return b("<button/>",{class:n+"modal-button "+n+"modal-"+e,type:e,text:this.lang[e]||e}).appendTo(b("form",t))},closeModal:function(){var e=this,t=e.o.prefix;e.$btnPane.removeClass(t+"disable"),e.$overlay.off();var n=b("."+t+"modal-box",b(m.body));n.animate({top:"-"+n.height()},100,function(){n.parent().remove(),e.hideOverlay()}),e.restoreRange()},openModalInsert:function(e,t,n){var l=this,i=l.o.prefix,s=l.lang,d="";return b.each(t,function(e,t){var n=t.label||e,o=t.name||e,a=t.attributes||{},r=Object.keys(a).map(function(e){return e+'="'+a[e]+'"'}).join(" ");d+='<label><input type="'+(t.type||"text")+'" name="'+o+'"'+("checkbox"===t.type&&t.value?' checked="checked"':' value="'+(t.value||"").replace(/"/g,"&quot;"))+'"'+r+'><span class="'+i+'input-infos"><span>'+(s[n]?s[n]:n)+"</span></span></label>"}),l.openModal(e,d).on(c,function(){var a=b("form",b(this)),r=!0,i={};b.each(t,function(e,t){var n=t.name||e,o=b('input[name="'+n+'"]',a);switch(o.attr("type").toLowerCase()){case"checkbox":i[n]=o.is(":checked");break;case"radio":i[n]=o.filter(":checked").val();break;default:i[n]=b.trim(o.val())}t.required&&""===i[n]?(r=!1,l.addErrorOnModalField(o,l.lang.required)):t.pattern&&!t.pattern.test(i[n])&&(r=!1,l.addErrorOnModalField(o,t.patternError))}),r&&(l.restoreRange(),n(i,t)&&(l.syncCode(),l.$c.trigger("tbwchange"),l.closeModal(),b(this).off(c)))}).one(u,function(){b(this).off(c),l.closeModal()})},addErrorOnModalField:function(e,t){var n=this.o.prefix,o=e.parent();e.on("change keyup",function(){o.removeClass(n+"input-error")}),o.addClass(n+"input-error").find("input+span").append(b("<span/>",{class:n+"msg-error",text:t}))},getDefaultImgDblClickHandler:function(){var a=this;return function(){var t=b(this),e=t.attr("src"),n="(Base64)";0===e.indexOf("data:image")&&(e=n);var o={url:{label:"URL",value:e,required:!0},alt:{label:a.lang.description,value:t.attr("alt")}};return a.o.imageWidthModalEdit&&(o.width={value:t.attr("width")?t.attr("width"):""}),a.openModalInsert(a.lang.insertImage,o,function(e){return e.url!==n&&t.attr({src:e.url}),t.attr({alt:e.alt}),a.o.imageWidthModalEdit&&(0<parseInt(e.width)?t.attr({width:e.width}):t.removeAttr("width")),!0}),!1}},saveRange:function(){var e=this,t=e.doc.getSelection();if(e.range=null,t.rangeCount){var n,o=e.range=t.getRangeAt(0),a=e.doc.createRange();a.selectNodeContents(e.$ed[0]),a.setEnd(o.startContainer,o.startOffset),n=(a+"").length,e.metaRange={start:n,end:n+(o+"").length}}},restoreRange:function(){var e,t=this,n=t.metaRange,o=t.range,a=t.doc.getSelection();if(o){if(n&&n.start!==n.end){var r,i=0,l=[t.$ed[0]],s=!1,d=!1;for(e=t.doc.createRange();!d&&(r=l.pop());)if(3===r.nodeType){var c=i+r.length;!s&&n.start>=i&&n.start<=c&&(e.setStart(r,n.start-i),s=!0),s&&n.end>=i&&n.end<=c&&(e.setEnd(r,n.end-i),d=!0),i=c}else for(var u=r.childNodes,f=u.length;0<f;)f-=1,l.push(u[f])}a.removeAllRanges(),a.addRange(e||o)}},getRangeText:function(){return this.range+""},updateButtonPaneStatus:function(){var r=this,i=r.o.prefix,e=r.getTagsRecursive(r.doc.getSelection().focusNode),l=i+"active-button "+i+"active";b("."+i+"active-button",r.$btnPane).removeClass(l),b.each(e,function(e,t){var n=r.tagToButton[t.toLowerCase()],o=b("."+i+n+"-button",r.$btnPane);if(0<o.length)o.addClass(l);else try{var a=(o=b("."+i+"dropdown ."+i+n+"-dropdown-button",r.$box)).parent().data("dropdown");b("."+i+a+"-button",r.$box).addClass(l)}catch(e){}})},getTagsRecursive:function(n,o){var a=this;if(o=o||(n&&n.tagName?[n.tagName]:[]),!n||!n.parentNode)return o;var e=(n=n.parentNode).tagName;return"DIV"===e?o:("P"===e&&""!==n.style.textAlign&&o.push(n.style.textAlign),b.each(a.tagHandlers,function(e,t){o=o.concat(t(n,a))}),o.push(e),a.getTagsRecursive(n,o).filter(function(e){return null!=e}))},initPlugins:function(){var n=this;n.loadedPlugins=[],b.each(b.trumbowyg.plugins,function(e,t){t.shouldInit&&!t.shouldInit(n)||(t.init(n),t.tagHandler&&n.tagHandlers.push(t.tagHandler),n.loadedPlugins.push(t))})},destroyPlugins:function(){b.each(this.loadedPlugins,function(e,t){t.destroy&&t.destroy()})}}}(navigator,window,document,jQuery),function(i){"use strict";var t=function(){return"undefined"!=typeof FileReader};i.extend(!0,i.trumbowyg,{langs:{en:{base64:"Image as base64",file:"File",errFileReaderNotSupported:"FileReader is not supported by your browser.",errInvalidImage:"Invalid image file."},da:{base64:"Billede som base64",file:"Fil",errFileReaderNotSupported:"FileReader er ikke understøttet af din browser.",errInvalidImage:"Ugyldig billedfil."},fr:{base64:"Image en base64",file:"Fichier"},cs:{base64:"Vložit obrázek",file:"Soubor"},zh_cn:{base64:"图片（Base64编码）",file:"文件"},nl:{base64:"Afbeelding inline",file:"Bestand",errFileReaderNotSupported:"Uw browser ondersteunt deze functionaliteit niet.",errInvalidImage:"De gekozen afbeelding is ongeldig."},ru:{base64:"Изображение как код в base64",file:"Файл",errFileReaderNotSupported:"FileReader не поддерживается вашим браузером.",errInvalidImage:"Недопустимый файл изображения."},ja:{base64:"画像 (Base64形式)",file:"ファイル",errFileReaderNotSupported:"あなたのブラウザーはFileReaderをサポートしていません",errInvalidImage:"画像形式が正しくありません"},tr:{base64:"Base64 olarak resim",file:"Dosya",errFileReaderNotSupported:"FileReader tarayıcınız tarafından desteklenmiyor.",errInvalidImage:"Geçersiz resim dosyası."},zh_tw:{base64:"圖片(base64編碼)",file:"檔案",errFileReaderNotSupported:"你的瀏覽器不支援FileReader",errInvalidImage:"不正確的檔案格式"}},plugins:{base64:{shouldInit:t,init:function(r){var e={isSupported:t,fn:function(){var t;r.saveRange();var a=r.openModalInsert(r.lang.base64,{file:{type:"file",required:!0,attributes:{accept:"image/*"}},alt:{label:"description",value:r.getRangeText()}},function(n){var o=new FileReader;o.onloadend=function(e){var t;t=e.target.result,/^data:image\/[a-z]?/i.test(t)?(r.execCmd("insertImage",o.result,!1,!0),i(['img[src="',o.result,'"]:not([alt])'].join(""),r.$box).attr("alt",n.alt),r.closeModal()):r.addErrorOnModalField(i("input[type=file]",a),r.lang.errInvalidImage)},o.readAsDataURL(t)});i("input[type=file]").on("change",function(e){t=e.target.files[0]})}};r.addBtnDef("base64",e)}}}})}(jQuery),function(l){"use strict";function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}function r(e){return-1===e.search("rgb")?e.replace("#",""):"rgba(0, 0, 0, 0)"===e?"transparent":t((e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/))[1])+t(e[2])+t(e[3])}l.extend(!0,l.trumbowyg,{langs:{cs:{foreColor:"Barva textu",backColor:"Barva pozadí"},en:{foreColor:"Text color",backColor:"Background color"},da:{foreColor:"Tekstfarve",backColor:"Baggrundsfarve"},fr:{foreColor:"Couleur du texte",backColor:"Couleur de fond"},de:{foreColor:"Textfarbe",backColor:"Hintergrundfarbe"},nl:{foreColor:"Tekstkleur",backColor:"Achtergrondkleur"},sk:{foreColor:"Farba textu",backColor:"Farba pozadia"},zh_cn:{foreColor:"文字颜色",backColor:"背景颜色"},zh_tw:{foreColor:"文字顏色",backColor:"背景顏色"},ru:{foreColor:"Цвет текста",backColor:"Цвет выделения текста"},ja:{foreColor:"文字色",backColor:"背景色"},tr:{foreColor:"Yazı rengi",backColor:"Arkaplan rengi"}}});var o={colorList:["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646","ffff00","f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","fff2ca","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","ffe694","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","b7dde8","fac08f","f2c314","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","92cddc","e36c09","c09100","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","31859b","974806","7f6000"]};function a(a,r){var i=[];l.each(r.o.plugins.colors.colorList,function(e,t){var n=a+t,o={fn:a,forceCss:!0,param:"#"+t,style:"background-color: #"+t+";"};r.addBtnDef(n,o),i.push(n)});var e=a+"Remove",t={fn:"removeFormat",param:a,style:"background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAG0lEQVQIW2NkQAAfEJMRmwBYhoGBYQtMBYoAADziAp0jtJTgAAAAAElFTkSuQmCC);"};r.addBtnDef(e,t),i.push(e);var n=a+"Free",o={fn:function(){r.openModalInsert(r.lang[a],{color:{label:a,type:"color",value:"#FFFFFF"}},function(e){return r.execCmd(a,e.color),!0})},text:"#",style:"text-indent: 0;line-height: 20px;padding: 0 5px;"};return r.addBtnDef(n,o),i.push(n),i}l.extend(!0,l.trumbowyg,{plugins:{color:{init:function(e){e.o.plugins.colors=e.o.plugins.colors||o;var t={dropdown:a("foreColor",e)},n={dropdown:a("backColor",e)};e.addBtnDef("foreColor",t),e.addBtnDef("backColor",n)},tagHandler:function(e,t){var n,o=[];if(!e.style)return o;if(""!==e.style.backgroundColor){var a=r(e.style.backgroundColor);0<=t.o.plugins.colors.colorList.indexOf(a)?o.push("backColor"+a):o.push("backColorFree")}return""!==e.style.color?n=r(e.style.color):e.hasAttribute("color")&&(n=r(e.getAttribute("color"))),n&&(0<=t.o.plugins.colors.colorList.indexOf(n)?o.push("foreColor"+n):o.push("foreColorFree")),o}}}})}(jQuery),function(i){"use strict";i.extend(!0,i.trumbowyg,{langs:{en:{fontsize:"Font size",fontsizes:{"x-small":"Extra small",small:"Small",medium:"Regular",large:"Large","x-large":"Extra large",custom:"Custom"},fontCustomSize:{title:"Custom Font Size",label:"Font Size",value:"48px"}},da:{fontsize:"Skriftstørrelse",fontsizes:{"x-small":"Ekstra lille",small:"Lille",medium:"Normal",large:"Stor","x-large":"Ekstra stor",custom:"Brugerdefineret"}},fr:{fontsize:"Taille de la police",fontsizes:{"x-small":"Très petit",small:"Petit",medium:"Normal",large:"Grand","x-large":"Très grand",custom:"Douane"}},de:{fontsize:"Font size",fontsizes:{"x-small":"Sehr klein",small:"Klein",medium:"Normal",large:"Groß","x-large":"Sehr groß",custom:"Benutzerdefiniert"}},nl:{fontsize:"Lettergrootte",fontsizes:{"x-small":"Extra klein",small:"Klein",medium:"Normaal",large:"Groot","x-large":"Extra groot",custom:"Tilpasset"}},tr:{fontsize:"Yazı Boyutu",fontsizes:{"x-small":"Çok Küçük",small:"Küçük",medium:"Normal",large:"Büyük","x-large":"Çok Büyük",custom:"Görenek"}},zh_tw:{fontsize:"字體大小",fontsizes:{"x-small":"最小",small:"小",medium:"中",large:"大","x-large":"最大",custom:"自訂大小"},fontCustomSize:{title:"自訂義字體大小",label:"字體大小",value:"48px"}}}}),i.extend(!0,i.trumbowyg,{plugins:{fontsize:{init:function(e){e.addBtnDef("fontsize",{dropdown:function(r){var n=[];i.each(["x-small","small","medium","large","x-large"],function(e,t){r.addBtnDef("fontsize_"+t,{text:'<span style="font-size: '+t+';">'+r.lang.fontsizes[t]+"</span>",hasIcon:!1,fn:function(){r.execCmd("fontSize",e+1,!0)}}),n.push("fontsize_"+t)});var e="fontsize_custom",t={fn:function(){r.openModalInsert(r.lang.fontCustomSize.title,{size:{label:r.lang.fontCustomSize.label,value:r.lang.fontCustomSize.value}},function(e){var t=r.range.startContainer.parentElement,n=r.getRangeText();if(i(t).html()===n)i(t).css("font-size",e.size);else{r.range.deleteContents();var o='<span style="font-size: '+e.size+';">'+n+"</span>",a=i(o)[0];r.range.insertNode(a)}return r.saveRange(),!0})},text:'<span style="font-size: medium;">'+r.lang.fontsizes.custom+"</span>",hasIcon:!1};return r.addBtnDef(e,t),n.push(e),n}(e)})}}}})}(jQuery),function(t){"use strict";t.extend(!0,t.trumbowyg,{langs:{en:{fontFamily:"Font"},da:{fontFamily:"Skrifttype"},fr:{fontFamily:"Police"},de:{fontFamily:"Schriftart"},nl:{fontFamily:"Lettertype"},tr:{fontFamily:"Yazı Tipi"},zh_tw:{fontFamily:"字體"}}});var a={fontList:[{name:"Arial",family:"Arial, Helvetica, sans-serif"},{name:"Arial Black",family:"'Arial Black', Gadget, sans-serif"},{name:"Comic Sans",family:"'Comic Sans MS', Textile, cursive, sans-serif"},{name:"Courier New",family:"'Courier New', Courier, monospace"},{name:"Georgia",family:"Georgia, serif"},{name:"Impact",family:"Impact, Charcoal, sans-serif"},{name:"Lucida Console",family:"'Lucida Console', Monaco, monospace"},{name:"Lucida Sans",family:"'Lucida Sans Uncide', 'Lucida Grande', sans-serif"},{name:"Palatino",family:"'Palatino Linotype', 'Book Antiqua', Palatino, serif"},{name:"Tahoma",family:"Tahoma, Geneva, sans-serif"},{name:"Times New Roman",family:"'Times New Roman', Times, serif"},{name:"Trebuchet",family:"'Trebuchet MS', Helvetica, sans-serif"},{name:"Verdana",family:"Verdana, Geneva, sans-serif"}]};t.extend(!0,t.trumbowyg,{plugins:{fontfamily:{init:function(e){var n,o;e.o.plugins.fontfamily=e.o.plugins.fontfamily||a,e.addBtnDef("fontfamily",{dropdown:(n=e,o=[],t.each(n.o.plugins.fontfamily.fontList,function(e,t){n.addBtnDef("fontfamily_"+e,{title:'<span style="font-family: '+t.family+';">'+t.name+"</span>",hasIcon:!1,fn:function(){n.execCmd("fontName",t.family,!0)}}),o.push("fontfamily_"+e)}),o),hasIcon:!1,text:e.lang.fontFamily})}}}})}(jQuery),function(g){"use strict";g.extend(!0,g.trumbowyg,{langs:{de:{history:{redo:"Wiederholen",undo:"Rückgängig"}},en:{history:{redo:"Redo",undo:"Undo"}},da:{history:{redo:"Annuller fortryd",undo:"Fortryd"}},fr:{history:{redo:"Annuler",undo:"Rétablir"}},zh_tw:{history:{redo:"重做",undo:"復原"}}},plugins:{history:{init:function(c){c.o.plugins.history=g.extend(!0,{_stack:[],_index:-1,_focusEl:void 0},c.o.plugins.history||{});var e={title:c.lang.history.redo,ico:"redo",key:"Y",fn:function(){if(c.o.plugins.history._index<c.o.plugins.history._stack.length-1){c.o.plugins.history._index+=1;var e=c.o.plugins.history._index,t=c.o.plugins.history._stack[e];c.execCmd("html",t),c.o.plugins.history._stack[e]=c.$ed.html(),n(),u()}}},t={title:c.lang.history.undo,ico:"undo",key:"Z",fn:function(){if(0<c.o.plugins.history._index){c.o.plugins.history._index-=1;var e=c.o.plugins.history._index,t=c.o.plugins.history._stack[e];c.execCmd("html",t),c.o.plugins.history._stack[e]=c.$ed.html(),n(),u()}}},u=function(){var e=c.o.plugins.history._index,t=c.o.plugins.history._stack.length,n=0!==t&&e!==t-1;o("historyUndo",0<e),o("historyRedo",n)},o=function(e,t){var n=c.$box.find(".trumbowyg-"+e+"-button");t?n.removeClass("trumbowyg-disable"):n.hasClass("trumbowyg-disable")||n.addClass("trumbowyg-disable")},f=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0},n=function(){var e=c.doc.getSelection().focusNode,t=c.doc.createRange();0<e.childNodes.length&&(t.setStartAfter(e.childNodes[e.childNodes.length-1]),t.setEndAfter(e.childNodes[e.childNodes.length-1]),c.doc.getSelection().removeAllRanges(),c.doc.getSelection().addRange(t))};c.$c.on("tbwinit tbwchange",function(){var e,t,n=c.o.plugins.history._index,o=c.o.plugins.history._stack,a=o.slice(-1)[0]||"<p></p>",r=o[n],i=c.$ed.html(),l=c.doc.getSelection().focusNode,s="",d=c.o.plugins.history._focusEl;e=g("<div>"+a+"</div>").find("*").map(function(){return this.localName}),t=g("<div>"+i+"</div>").find("*").map(function(){return this.localName}),l&&(s=(c.o.plugins.history._focusEl=l).outerHTML||l.textContent),i!==r&&(s.slice(-1).match(/\s/)||!f(e,t)||c.o.plugins.history._index<=0||l!==d?(c.o.plugins.history._index+=1,c.o.plugins.history._stack=o.slice(0,c.o.plugins.history._index),c.o.plugins.history._stack.push(i)):c.o.plugins.history._stack[n]=i,u())}),c.addBtnDef("historyRedo",e),c.addBtnDef("historyUndo",t)}}}})}(jQuery),function(o){"use strict";var t={proxy:"https://noembed.com/embed?nowrap=on",urlFiled:"url",data:[],success:void 0,error:void 0};o.extend(!0,o.trumbowyg,{langs:{en:{noembed:"Noembed",noembedError:"Error"},da:{noembedError:"Fejl"},sk:{noembedError:"Chyba"},fr:{noembedError:"Erreur"},cs:{noembedError:"Chyba"},ru:{noembedError:"Ошибка"},ja:{noembedError:"エラー"},tr:{noembedError:"Hata"},zh_tw:{noembed:"插入影片",noembedError:"錯誤"}},plugins:{noembed:{init:function(n){n.o.plugins.noembed=o.extend(!0,{},t,n.o.plugins.noembed||{});var e={fn:function(){var t=n.openModalInsert(n.lang.noembed,{url:{label:"URL",required:!0}},function(e){o.ajax({url:n.o.plugins.noembed.proxy,type:"GET",data:e,cache:!1,dataType:"json",success:n.o.plugins.noembed.success||function(e){e.html?(n.execCmd("insertHTML",e.html),setTimeout(function(){n.closeModal()},250)):n.addErrorOnModalField(o("input[type=text]",t),e.error)},error:n.o.plugins.noembed.error||function(){n.addErrorOnModalField(o("input[type=text]",t),n.lang.noembedError)}})})}};n.addBtnDef("noembed",e)}}}})}(jQuery),function(s){"use strict";var e={enabled:!0,endpoints:["https://noembed.com/embed?nowrap=on","https://api.maxmade.nl/url2iframe/embed"]};s.extend(!0,s.trumbowyg,{plugins:{pasteEmbed:{init:function(l){l.o.plugins.pasteEmbed=s.extend(!0,{},e,l.o.plugins.pasteEmbed||{}),l.o.plugins.pasteEmbed.enabled&&l.pasteHandlers.push(function(e){try{var t=(e.originalEvent||e).clipboardData.getData("Text"),n=l.o.plugins.pasteEmbed.endpoints,o=null;if(t.startsWith("http")){e.stopPropagation(),e.preventDefault();var a={url:t.trim()},r="",i=0;o&&o.transport&&o.transport.abort(),o=s.ajax({crossOrigin:!0,url:n[i],type:"GET",data:a,cache:!1,dataType:"jsonp",success:function(e){e.html?(i=0,r=e.html):i+=1},error:function(){i+=1},complete:function(){0===r.length&&i<n.length-1&&(this.url=n[i],this.data=a,s.ajax(this)),i===n.length-1&&(r=s("<a>",{href:t,text:t}).prop("outerHTML")),0<r.length&&(i=0,l.execCmd("insertHTML",r))}})}}catch(e){}})}}}})}(jQuery),function(a){"use strict";a.extend(!0,a.trumbowyg,{langs:{en:{preformatted:"Code sample <pre>"},da:{preformatted:"Præformateret <pre>"},fr:{preformatted:"Exemple de code <pre>"},it:{preformatted:"Codice <pre>"},zh_cn:{preformatted:"代码示例 <pre>"},ru:{preformatted:"Пример кода <pre>"},ja:{preformatted:"コードサンプル <pre>"},tr:{preformatted:"Kod örneği <pre>"},zh_tw:{preformatted:"代碼範例 <pre>"}},plugins:{preformatted:{init:function(n){var e={fn:function(){n.saveRange();var e=n.getRangeText();if(""!==e.replace(/\s/g,""))try{var t=function(){var e,t=null;window.getSelection?(e=window.getSelection()).rangeCount&&1!==(t=e.getRangeAt(0).commonAncestorContainer).nodeType&&(t=t.parentNode):(e=document.selection)&&"Control"!==e.type&&(t=e.createRange().parentElement());return t}().tagName.toLowerCase();if("code"===t||"pre"===t)return function(){var e=null;if(document.selection)e=document.selection.createRange().parentElement();else{var t=window.getSelection();0<t.rangeCount&&(e=t.getRangeAt(0).startContainer.parentNode)}var n=a(e).contents().closest("pre").length,o=a(e).contents().closest("code").length;n&&o?a(e).contents().unwrap("code").unwrap("pre"):n?a(e).contents().unwrap("pre"):o&&a(e).contents().unwrap("code")}();n.execCmd("insertHTML",'<pre><code class="hljs plaintext">'+e+"</code></pre>")}catch(e){}},tag:"pre"};n.addBtnDef("preformatted",e)}}}})}(jQuery),function(u){"use strict";var i={rows:8,columns:8,styler:"table"};u.extend(!0,u.trumbowyg,{langs:{en:{table:"Insert table",tableAddRow:"Add row",tableAddColumn:"Add column",tableDeleteRow:"Delete row",tableDeleteColumn:"Delete column",tableDestroy:"Delete table",error:"Error"},da:{table:"Indsæt tabel",tableAddRow:"Tilføj række",tableAddColumn:"Tilføj kolonne",tableDeleteRow:"Slet række",tableDeleteColumn:"Slet kolonne",tableDestroy:"Slet tabel",error:"Fejl"},de:{table:"Tabelle einfügen",tableAddRow:"Zeile hinzufügen",tableAddColumn:"Spalte hinzufügen",tableDeleteRow:"Zeile löschen",tableDeleteColumn:"Spalte löschen",tableDestroy:"Tabelle löschen",error:"Error"},sk:{table:"Vytvoriť tabuľky",tableAddRow:"Pridať riadok",tableAddColumn:"Pridať stĺpec",error:"Chyba"},fr:{table:"Insérer un tableau",tableAddRow:"Ajouter des lignes",tableAddColumn:"Ajouter des colonnes",error:"Erreur"},cs:{table:"Vytvořit příkaz Table",tableAddRow:"Přidat řádek",tableAddColumn:"Přidat sloupec",error:"Chyba"},ru:{table:"Вставить таблицу",tableAddRow:"Добавить строку",tableAddColumn:"Добавить столбец",tableDeleteRow:"Удалить строку",tableDeleteColumn:"Удалить столбец",tableDestroy:"Удалить таблицу",error:"Ошибка"},ja:{table:"表の挿入",tableAddRow:"行の追加",tableAddColumn:"列の追加",error:"エラー"},tr:{table:"Tablo ekle",tableAddRow:"Satır ekle",tableAddColumn:"Kolon ekle",error:"Hata"},zh_tw:{table:"插入表格",tableAddRow:"加入行",tableAddColumn:"加入列",tableDeleteRow:"刪除行",tableDeleteColumn:"刪除列",tableDestroy:"刪除表格",error:"錯誤"},id:{table:"Sisipkan tabel",tableAddRow:"Sisipkan baris",tableAddColumn:"Sisipkan kolom",tableDeleteRow:"Hapus baris",tableDeleteColumn:"Hapus kolom",tableDestroy:"Hapus tabel",error:"Galat"}},plugins:{table:{init:function(s){s.o.plugins.table=u.extend(!0,{},i,s.o.plugins.table||{});var e={fn:function(){s.saveRange();var e="table",t=s.o.prefix+"dropdown",n={class:t+"-"+e+" "+t+" "+s.o.prefix+"fixed-top"};n["data-"+t]=e;var o=u("<div/>",n);if(0===s.$box.find("."+t+"-"+e).length?s.$box.append(o.hide()):o=s.$box.find("."+t+"-"+e),o.html(""),s.$box.find("."+s.o.prefix+"table-button").hasClass(s.o.prefix+"active-button"))o.append(s.buildSubBtn("tableAddRow")),o.append(s.buildSubBtn("tableAddColumn")),o.append(s.buildSubBtn("tableDeleteRow")),o.append(s.buildSubBtn("tableDeleteColumn")),o.append(s.buildSubBtn("tableDestroy"));else{for(var a=u("<table></table>"),r=0;r<s.o.plugins.table.rows;r+=1)for(var i=u("<tr></tr>").appendTo(a),l=0;l<s.o.plugins.table.columns;l+=1)u("<td></td>").appendTo(i);a.find("td").on("mouseover",d),a.find("td").on("mousedown",c),o.append(a),o.append(u("<center>1x1</center>"))}s.dropdown(e)}},d=function(e){var t=u(e.target).parents("table"),n=this.cellIndex,o=this.parentNode.rowIndex;t.find("td").removeClass("active");for(var a=0;a<=o;a+=1)for(var r=0;r<=n;r+=1)t.find("tr:nth-of-type("+(a+1)+")").find("td:nth-of-type("+(r+1)+")").addClass("active");t.next("center").html(n+1+"x"+(o+1))},c=function(e){s.saveRange();var t=u("<table></table>");s.o.plugins.table.styler&&t.attr("class",s.o.plugins.table.styler);u(e.target);for(var n=this.cellIndex,o=this.parentNode.rowIndex,a=0;a<=o;a+=1)for(var r=u("<tr></tr>").appendTo(t),i=0;i<=n;i+=1)u("<td></td>").appendTo(r);s.range.deleteContents(),s.range.insertNode(t[0]),s.$c.trigger("tbwchange")},t={title:s.lang.tableAddRow,text:s.lang.tableAddRow,ico:"row-below",fn:function(){s.saveRange();var e=s.doc.getSelection().focusNode,t=u(e).closest("table");if(0<t.length){for(var n=u("<tr></tr>"),o=0;o<t.find("tr")[0].childElementCount;o+=1)u("<td></td>").appendTo(n);n.appendTo(t)}return!0}},n={title:s.lang.tableAddColumn,text:s.lang.tableAddColumn,ico:"col-right",fn:function(){s.saveRange();var e=s.doc.getSelection().focusNode,t=u(e).closest("table");return 0<t.length&&u(t).find("tr").each(function(){u(this).find("td:last").after("<td></td>")}),!0}},o={title:s.lang.tableDestroy,text:s.lang.tableDestroy,ico:"table-delete",fn:function(){s.saveRange();var e=s.doc.getSelection().focusNode;return u(e).closest("table").remove(),!0}},a={title:s.lang.tableDeleteRow,text:s.lang.tableDeleteRow,ico:"row-delete",fn:function(){s.saveRange();var e=s.doc.getSelection().focusNode;return u(e).closest("tr").remove(),!0}},r={title:s.lang.tableDeleteColumn,text:s.lang.tableDeleteColumn,ico:"col-delete",fn:function(){s.saveRange();var e=s.doc.getSelection().focusNode,t=u(e).closest("table"),n=u(e).closest("td").index();return u(t).find("tr").each(function(){u(this).find("td:eq("+n+")").remove()}),!0}};s.addBtnDef("table",e),s.addBtnDef("tableAddRow",t),s.addBtnDef("tableAddColumn",n),s.addBtnDef("tableDeleteRow",a),s.addBtnDef("tableDeleteColumn",r),s.addBtnDef("tableDestroy",o)}}}})}(jQuery);
