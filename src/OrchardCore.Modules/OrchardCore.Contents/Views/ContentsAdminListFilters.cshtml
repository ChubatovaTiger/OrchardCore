@model ContentOptionsViewModel
@{
    var userSearchUrl = Url.RouteUrl(new { area = "OrchardCore.Contents", controller = "Admin", action = "SearchUsers" });
}
<div class="btn-group filter">
    @if (Model.ContentTypeOptions.Count > 0)
    {
        <select asp-for="SelectedContentType" asp-items="Model.ContentTypeOptions" class="selectpicker contenttypes-selectpicker show-tick me-2" data-header="@T["Filter by content type"]" data-selected-text-format="static" data-width="fit" data-dropdown-align-right="auto" title="@T["Content Type"]" data-style="btn-sm" data-live-search="true"></select>
    }
    <select asp-for="ContentsStatus" asp-items="@Model.ContentStatuses" class="selectpicker contentstatuses-selectpicker show-tick me-2" data-header="@T["Filter by status"]" data-selected-text-format="static" data-width="fit" data-dropdown-align-right="auto" title="@T["Show"]" data-style="btn-sm"></select>
    <select asp-for="SelectedUserId" class="contentowners-selectpicker show-tick me-2" data-header="@T["Filter by owner"]" data-selected-text-format="static" data-width="fit" data-dropdown-align-right="auto" title="@T["Owner"]" data-style="btn-sm" data-live-search="true"></select>
    <select asp-for="OrderBy" asp-items="@Model.ContentSorts" class="selectpicker contentsorts-selectpicker show-tick" data-header="@T["Sort by"]" data-width="fit" data-selected-text-format="static" data-dropdown-align-right="true" title="@T["Sort"]" data-style="btn-sm"></select>
</div>

<script at="Foot">
    $(function () {
        $('#@Html.IdFor(m => m.SelectedUserId)').selectpicker({
            source: {
                data: function (callback, page) {
                    $.ajax('@userSearchUrl', { data: { page } })
                        .then((response) => callback(response.results, response.hasMoreResults))
                },
                search: function (callback, page, searchTerm) {
                    console.log(page)
                    $.ajax('@userSearchUrl', { data: { page, searchTerm } })
                        .then((response) => callback(response.results, response.hasMoreResults))
                }
            }
        });
    })
</script>
