!function(e){"use strict";var n={minSize:32,step:4};e.extend(!0,e.trumbowyg,{plugins:{insertImage:{init:function(n){var t={fn:function(){var t=n;t.saveRange(),e("#mediaApp").detach().appendTo("#mediaModalHtmlField .modal-body"),e("#mediaApp").show(),mediaApp.selectedMedias=[];e("#mediaModalHtmlField").modal();e("#mediaHtmlFieldSelectButton").on("click",(function(n){for(t.$ed.focus(),t.restoreRange(),t.range.deleteContents(),e(window).trigger("scroll"),i=0;i<mediaApp.selectedMedias.length;i++){var o=document.createElement("img");o.src=mediaApp.selectedMedias[i].url,o.alt=mediaApp.selectedMedias[i].name,t.range.insertNode(o)}return t.syncCode(),t.$c.trigger("tbwchange"),e("#mediaModalHtmlField").modal("hide"),!0}))}};n.addBtnDef("insertImage",t)}},resizimg:{init:function(i){var t=new ResizeWithCanvas;function o(){i.$ed.find("img").off("click").on("click",(function(e){t.isActive()&&t.reset(),t.setup(this,i.o.plugins.resizimg.resizable)}))}function r(e){return e.preventDefault()}function s(e){e.$ed.find("canvas.resizable").resizable("destroy").off("mousedown",r).removeClass("resizable"),t.reset(),e.syncCode()}i.o.plugins.resizimg=e.extend(!0,{},n,i.o.plugins.resizimg||{},{resizable:{resizeWidth:!1,onDragStart:function(e,n){var t=i.o.plugins.resizimg,o=e.pageX-n.offset().left,r=e.pageY-n.offset().top;if(o<n.width()-t.minSize||r<n.height()-t.minSize)return!1},onDrag:function(e,n,t,o){var r=i.o.plugins.resizimg;return o<r.minSize&&(o=r.minSize),o-=o%r.step,n.height(o),!1},onDragEnd:function(){t.refresh(),i.syncCode()}}}),i.$c.on("tbwinit",(function(n){o(),i.$ed.on("click",(function(n){n.preventDefault(),n.stopPropagation(),e(n.target).is("img")||n.target.id===t.canvasId()||(t.reset(),i.$c.trigger("tbwchange"))})),i.$ed.on("scroll",(function(e){t.reCalcOffset()}))})),i.$c.on("tbwfocus",o),i.$c.on("tbwchange",o),i.$c.on("tbwresize",(function(e){t.reCalcOffset()})),i.$c.on("tbwblur",(function(){s(i)})),i.$c.on("tbwclose",(function(){s(i)}))},destroy:function(e){destroyResizable(e)}}}})}(jQuery);
