"use strict";function debounce(t,e,n){var i;return function(){var s=this,a=arguments,u=function(){i=null,n||t.apply(s,a)},r=n&&!i;clearTimeout(i),i=setTimeout(u,e),r&&t.apply(s,a)}}function initVueMultiselect(t){if(t){var e=t.id,n=JSON.parse(t.dataset.selectedItems||"[]"),s=t.dataset.tenantPath,a=t.dataset.searchUrl,u=JSON.parse(t.dataset.multiple),r=debounce(function(t,e){t.isLoading=!0;var n=s+"/"+a;e&&(n+="&query="+e),fetch(n).then(function(e){e.json().then(function(e){t.options=e,t.isLoading=!1})})},250),c=Vue.component("vue-multiselect",window.VueMultiselect.default),o=new Vue({el:"#"+e,components:{"vue-multiselect":c},data:{value:null,arrayOfItems:n,options:[]},computed:{selectedIds:function(){return this.arrayOfItems.map(function(t){return t.id}).join(",")},isDisabled:function(){return this.arrayOfItems.length>0&&!u}},watch:{selectedIds:function(){setTimeout(function(){$(document).trigger("contentpreview:render")},100)}},created:function(){this.asyncFind()},methods:{asyncFind:function(t){r(this,t)},onSelect:function(t,e){for(i=0;i<this.arrayOfItems.length;i++)if(this.arrayOfItems[i].id===t.id)return;this.arrayOfItems.push(t)},remove:function(t){this.arrayOfItems.splice(this.arrayOfItems.indexOf(t),1)}}}),d=new CustomEvent("vue-multiselect-created",{detail:{vm:o}});document.querySelector("body").dispatchEvent(d)}}
