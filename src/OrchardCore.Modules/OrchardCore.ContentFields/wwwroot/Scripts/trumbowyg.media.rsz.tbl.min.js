!function(e){"use strict";var n={minSize:32,step:4};e.extend(!0,e.trumbowyg,{langs:{en:{insertImage:"Insert Media"},it:{insertImage:"Aggiungi Immagine"}},plugins:{insertImage:{init:function(n){var t={fn:function(){var t=n;t.saveRange(),e("#mediaApp").detach().appendTo("#mediaModalHtmlField .modal-body"),e("#mediaApp").show(),mediaApp.selectedMedias=[];e("#mediaModalHtmlField").modal();e("#mediaHtmlFieldSelectButton").on("click",function(n){for(t.restoreRange(),t.range.deleteContents(),e(window).trigger("scroll"),i=0;i<mediaApp.selectedMedias.length;i++){var a=document.createElement("img");a.src=mediaApp.selectedMedias[i].url,a.alt=mediaApp.selectedMedias[i].name,t.range.insertNode(a),t.syncCode()}return t.$c.trigger("tbwchange"),t.$c.focus(),e("#mediaModalHtmlField").modal("hide"),!0})}};n.addBtnDef("insertImage",t)}},resizimg:{init:function(i){var t=new ResizeWithCanvas;function a(){i.$ed.find("img").off("click").on("click",function(e){t.isActive()&&t.reset(),t.setup(this,i.o.plugins.resizimg.resizable)})}function o(e){return e.preventDefault()}function r(e){e.$ed.find("canvas.resizable").resizable("destroy").off("mousedown",o).removeClass("resizable"),t.reset(),e.syncTextarea()}i.o.plugins.resizimg=e.extend(!0,{},n,i.o.plugins.resizimg||{},{resizable:{resizeWidth:!1,onDragStart:function(e,n){var t=i.o.plugins.resizimg,a=e.pageX-n.offset().left,o=e.pageY-n.offset().top;if(a<n.width()-t.minSize||o<n.height()-t.minSize)return!1},onDrag:function(e,n,t,a){var o=i.o.plugins.resizimg;return a<o.minSize&&(a=o.minSize),a-=a%o.step,n.height(a),!1},onDragEnd:function(){i.syncCode(),t.refresh()}}}),i.$c.on("tbwinit",function(n){a(),i.$ed.on("click",function(n){n.preventDefault(),n.stopPropagation(),e(n.target).is("img")||n.target.id===t.canvasId()||(t.reset(),i.$c.trigger("tbwchange"))}),i.$ed.on("scroll",function(e){t.reCalcOffset()})}),i.$c.on("tbwfocus",a),i.$c.on("tbwchange",a),i.$c.on("tbwresize",function(e){t.reCalcOffset()}),i.$c.on("tbwblur",function(){r(i)}),i.$c.on("tbwclose",function(){r(i)})},destroy:function(e){destroyResizable(e)}}}})}(jQuery);
