@model OrchardCore.Flows.ViewModels.BagPartSettingsViewModel

<div class="mb-3">
    <label asp-for="Source">@T["Contained Content Types"]</label>
    <div class="w-sm-50" id="@Html.IdFor(x => x.Source)">
        <div class="form-check">
            <input class="form-check-input" type="radio" asp-for="Source" id="SourceContentTypes" value="ContentTypes" checked="@("ContentTypes".Equals(Model.Source, StringComparison.OrdinalIgnoreCase))">
            <label for="SourceContentTypes">
                @T["Content Types"]
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" asp-for="Source" id="SourceStereotype" value="Stereotypes" checked="@("Stereotypes".Equals(Model.Source, StringComparison.OrdinalIgnoreCase))">
            <label for="SourceStereotype">
                @T["Stereotype"]
            </label>
        </div>
    </div>
</div>

<div class="mb-3" id="ContentTypesContainer">
    <label asp-for="ContainedContentTypes">@T["Contained Content Types"]</label>
    <span class="hint">@T["The content types that this bag can contain, e.g. Slide for a Slide Show."]</span>
    @await Component.InvokeAsync("SelectContentTypes", new { selectedContentTypes = Model.ContainedContentTypes, htmlName = Html.NameFor(m => m.ContainedContentTypes) })
</div>

<div class="mb-3" id="StereotypeContainer">
    <div class="w-sm-50" id="@Html.IdFor(x => x.Source)">
        <label asp-for="Stereotypes">@T["Stereotypes"]</label>
        <input asp-for="Stereotypes" class="form-control medium" />
        <span class="hint">@T["The stereotypes of the content types that this bag can contain. You may define multiple Stereotypes using the comma (,) as a separator"]</span>
    </div>
</div>
<div class="mb-3">
    <div class="w-sm-50">
        <label asp-for="DisplayType">@T["Display Type"]</label>
        <input asp-for="DisplayType" placeholder="Summary" class="form-control medium" />
    </div>
    <span class="hint">@T["The display type to use when rendering the content items. Default is Summary."]</span>
</div>

<script at="Foot" asp-name="bagPartSettings">
    document.addEventListener('DOMContentLoaded', function() {

        var sources = document.getElementsByName('@Html.NameFor(x => x.Source)');
        var contentTypesContainer = document.getElementById('ContentTypesContainer');
        var stereotypeContainer = document.getElementById('StereotypeContainer');

        for (var i = 0; i < sources.length; i++) {
            var source = sources[i];

            source.addEventListener('change', function() {

                if (source.checked && source.value == 'Stereotypes') {
                    contentTypesContainer.classList.add('d-none');
                    stereotypeContainer.classList.remove('d-none');
                } else {
                    contentTypesContainer.classList.remove('d-none');
                    stereotypeContainer.classList.add('d-none');
                }
            });

            source.dispatchEvent(new Event('change'));
        }

    });
</script>
