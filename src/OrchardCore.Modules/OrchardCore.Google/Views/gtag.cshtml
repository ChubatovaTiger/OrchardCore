@using OrchardCore.Entities
@using OrchardCore.Settings
@using OrchardCore.Google.Analytics.Settings
@inject ISiteService _site
@{
    var settings = (await _site.GetSiteSettingsAsync()).As<GoogleAnalyticsSettings>();
    var trackingID = settings.TrackingID;
    var scriptsPosition = settings.ScriptsAtHead ? OrchardCore.ResourceManagement.ResourceLocation.Head : OrchardCore.ResourceManagement.ResourceLocation.Foot;

}
<script async at="@scriptsPosition" asp-src="https://www.googletagmanager.com/gtag/js?id=@trackingID"></script>
<script at="@scriptsPosition">
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', '@trackingID');
</script>
