@using System.Globalization
@using Microsoft.AspNetCore.Localization

@inject OrchardCore.Localization.ILocalizationService localizationService

@{
    var currentCulture = Context.Features.Get<IRequestCultureFeature>().RequestCulture.Culture;
    var supportedCultures = await localizationService.GetSupportedCulturesAsync();
}

@await DisplayAsync(await New.ContentCulturePickerContainer(
    CurrentCulture: new CultureViewModel() { Name = currentCulture.Name, DisplayName = currentCulture.DisplayName },
    SupportedCultures: supportedCultures.Select(c =>
        {
            var x = CultureInfo.GetCultureInfo(c);
            return new CultureViewModel() { Name = x.Name, DisplayName = x.DisplayName };
        }
    )
));
