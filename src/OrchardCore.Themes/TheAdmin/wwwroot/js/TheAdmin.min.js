function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var _excluded=["callback"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,o,a=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}function confirmDialog(e){var t=e.callback,n=_objectWithoutProperties(e,_excluded),o=$("#confirmRemoveModalMetadata").data(),a=$.extend({},o,n),i=a.title,r=a.message,s=a.okText,l=a.cancelText,c=a.okClass,d=a.cancelClass;$('<div id="confirmRemoveModal" class="modal" tabindex="-1" role="dialog">        <div class="modal-dialog modal-dialog-centered" role="document">            <div class="modal-content">                <div class="modal-header">                    <h5 class="modal-title">'+i+'</h5>                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>                </div>                <div class="modal-body">                    <p>'+r+'</p>                </div>                <div class="modal-footer">                    <button id="modalOkButton" type="button" class="btn '+c+'">'+s+'</button>                    <button id="modalCancelButton" type="button" class="btn '+d+'" data-bs-dismiss="modal">'+l+"</button>                </div>            </div>        </div>    </div>").appendTo("body");var u=new bootstrap.Modal($("#confirmRemoveModal"),{backdrop:"static",keyboard:!1});u.show(),document.getElementById("confirmRemoveModal").addEventListener("hidden.bs.modal",(function(){document.getElementById("confirmRemoveModal").remove(),u.dispose()})),$("#modalOkButton").click((function(){t(!0),u.hide()})),$("#modalCancelButton").click((function(){t(!1),u.hide()}))}function getTechnicalName(e){var t,n="";if(!e||0==e.length)return"";for(e=removeDiacritics(e),i=0;i<e.length;i++)(isLetter(t=e[i])||isNumber(t)&&i>0)&&(n+=t);return n}function isLetter(e){return 1===e.length&&e.match(/[a-z]/i)}function isNumber(e){return 1===e.length&&e.match(/[0-9]/i)}document.addEventListener("DOMContentLoaded",(function(){document.body.classList.remove("preload")})),$((function(){$("body").on("click",'[data-url-af~="RemoveUrl"], a[itemprop~="RemoveUrl"]',(function(){var e=$(this);return 1==e.filter('a[itemprop~="UnsafeUrl"]').length&&console.warn("Please use data-url-af instead of itemprop attribute for confirm modals. Using itemprop will eventually become deprecated."),1==e.filter('[data-url-af~="UnsafeUrl"], a[itemprop~="UnsafeUrl"]').length||confirmDialog(_objectSpread(_objectSpread({},e.data()),{},{callback:function(t){if(t){var n=e.attr("href");if(null==n){var o=e.parents("form");o.append($('<input type="hidden" name="'+e.attr("name")+'" value="'+e.attr("value")+'" />')),o.submit()}else window.location=n}}})),!1}))})),$((function(){var e=$("input[name=__RequestVerificationToken]").first();e&&$("body").on("click",'a[data-url-af~="UnsafeUrl"], a[itemprop~="UnsafeUrl"]',(function(){var t=$(this);1==t.filter('a[itemprop~="UnsafeUrl"]').length&&console.warn("Please use data-url-af instead of itemprop attribute for confirm modals. Using itemprop will eventually become deprecated.");var n=t.attr("href").split("?"),o=$('<form action="'+n[0]+'" method="POST" />');if(o.append(e.clone()),n.length>1)for(var a=n[1].split("&"),i=0;i<a.length;i++){var r=a[i].split("=");o.append($('<input type="hidden" name="'+decodeURIComponent(r[0])+'" value="'+decodeURIComponent(r[1])+'" />'))}o.css({position:"absolute",left:"-9999em"}),$("body").append(o);var s=t.data("unsafe-url");return s&&s.length>0||1==t.filter('[data-url-af~="RemoveUrl"], a[itemprop~="RemoveUrl"]').length?(confirmDialog(_objectSpread(_objectSpread({},t.data()),{},{callback:function(e){e&&o.submit()}})),!1):(o.submit(),!1)}))})),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)})),$("body").on("submit","form.no-multisubmit",(function(e){var t="submitting";form=$(this),form.hasClass(t)?e.preventDefault():(form.addClass(t),setTimeout((function(){form.removeClass(t)}),5e3))})),$((function(){$(".check-all-content-container").each((function(){var e=$(this),t=e.find('input[type="checkbox"].check-all-master'),n=e.find('.check-all-content-slave input[type="checkbox"]:not(:disabled)'),o=function(){var e=0==n.filter(":not(:checked)").length;t.prop("checked",e)};t.on("change",(function(){var e=$(this).is(":checked");n.prop("checked",e)})),n.on("change",(function(){o()})),o()}))})),$((function(){($("body").hasClass("left-sidebar-compact")||$("body").hasClass("no-admin-preferences")&&$(window).width()<768)&&setCompactStatus()})),$("span.title").each((function(){$(this).prev(".icon").prop("title",$(this).text())})),$(".leftbar-compactor").click((function(){$("body").hasClass("left-sidebar-compact")?unSetCompactStatus():setCompactStatus(!0)})),$("#left-nav li.has-items").click((function(){$("#left-nav li.has-items").removeClass("visible"),$(this).addClass("visible")})),$(document).on("click",(function(e){var t=$("#left-nav li.has-items");t===e.target||t.has(e.target).length||$("#left-nav li.has-items").removeClass("visible")}));var subMenuArray=new Array;function setCompactStatus(e){if(!$("body").hasClass("left-sidebar-compact")){var t=$("#left-nav ul.menu-admin > li > figure > figcaption > .item-label");t.css("background-color","transparent"),setTimeout((function(){t.css("background-color","")}),200)}$("body").addClass("left-sidebar-compact"),$("#left-nav ul.menu-admin > li > figure > ul").removeClass("collapse"),$("#left-nav ul.menu-admin > li > figure > figcaption > a").attr("data-bs-toggle",""),$("#left-nav li.has-items").removeClass("visible"),setTimeout((function(){$("#left-nav > ul > li").css("transition","none")}),200),1==e&&(isCompactExplicit=!0),persistAdminPreferences()}function unSetCompactStatus(){$("body").removeClass("left-sidebar-compact"),$("#left-nav ul.menu-admin > li > figure > ul").addClass("collapse"),$("#left-nav ul.menu-admin > li > figure > figcaption a").attr("data-bs-toggle","collapse"),$("#left-nav li.has-items").removeClass("visible"),$("#left-nav > ul > li").css("transition",""),isCompactExplicit=!1,persistAdminPreferences()}var leftNav=document.getElementById("left-nav"),resizeObserver=new ResizeObserver((function(e){isCompactExplicit&&leftNav.scrollHeight>leftNav.clientHeight?document.body.classList.add("scroll"):document.body.classList.remove("scroll")}));null!=leftNav&&resizeObserver.observe(leftNav);for(var defaultDiacriticsRemovalMap=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],diacriticsMap={},i=0;i<defaultDiacriticsRemovalMap.length;i++)for(var letters=defaultDiacriticsRemovalMap[i].letters,j=0;j<letters.length;j++)diacriticsMap[letters[j]]=defaultDiacriticsRemovalMap[i].base;function removeDiacritics(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return diacriticsMap[e]||e}))}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */}function persistAdminPreferences(){setTimeout((function(){var e={};e.leftSidebarCompact=!!document.body.classList.contains("left-sidebar-compact"),e.isCompactExplicit=isCompactExplicit,setAdminPreferences(e)}),200)}!function(){var e="",t="",n=!1,o=document.body.clientWidth;window.addEventListener("resize",(function(){var a=document.body.clientWidth,i=a<o?"reducing":"increasing";i!==e&&(n=!1),0==n&&i!=t&&("reducing"==i&&a<768&&(setCompactStatus(),t=i,n=!0),"increasing"==i&&a>768&&(0==isCompactExplicit&&unSetCompactStatus(),t=i,n=!0)),e=i,o=a}))}(),function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&void 0!==module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}((function(){"use strict";if("undefined"==typeof window||void 0===window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,n,o,a,i,r,s,l,c,d,u,f,p,h,m,b,g,v={},y=/\s+/g,_="Sortable"+(new Date).getTime(),D=window,w=D.document,S=D.parseInt,C=!!("draggable"in w.createElement("div")),E=((g=w.createElement("x")).style.cssText="pointer-events:auto","auto"===g.style.pointerEvents),O=!1,T=Math.abs,x=[],$=V((function(e,t,n){if(n&&t.scroll){var o,a,i,l,c=t.scrollSensitivity,d=t.scrollSpeed,u=e.clientX,f=e.clientY,p=window.innerWidth,h=window.innerHeight;if(s!==n&&(r=t.scroll,s=n,!0===r)){r=n;do{if(r.offsetWidth<r.scrollWidth||r.offsetHeight<r.scrollHeight)break}while(r=r.parentNode)}r&&(o=r,a=r.getBoundingClientRect(),i=(T(a.right-u)<=c)-(T(a.left-u)<=c),l=(T(a.bottom-f)<=c)-(T(a.top-f)<=c)),i||l||(l=(h-f<=c)-(f<=c),((i=(p-u<=c)-(u<=c))||l)&&(o=D)),v.vx===i&&v.vy===l&&v.el===o||(v.el=o,v.vx=i,v.vy=l,clearInterval(v.pid),o&&(v.pid=setInterval((function(){o===D?D.scrollTo(D.pageXOffset+i*d,D.pageYOffset+l*d):(l&&(o.scrollTop+=l*d),i&&(o.scrollLeft+=i*d))}),24)))}}),30),k=function(e){var t=e.group;t&&"object"==_typeof(t)||(t=e.group={name:t}),["pull","put"].forEach((function(e){e in t||(t[e]=!0)})),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};function j(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=K({},t),e[_]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var o in n)!(o in t)&&(t[o]=n[o]);for(var a in k(t),this)"_"===a.charAt(0)&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&C,R(e,"mousedown",this._onTapStart),R(e,"touchstart",this._onTapStart),this.nativeDraggable&&(R(e,"dragover",this),R(e,"dragenter",this)),x.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function P(t){o&&o.state!==t&&(B(o,"display",t?"none":""),!t&&o.state&&a.insertBefore(o,e),o.state=t)}function N(e,t,n){if(e){n=n||w;do{if(">*"===t&&e.parentNode===n||H(e,t))return e}while(e!==n&&(e=e.parentNode))}return null}function R(e,t,n){e.addEventListener(t,n,!1)}function U(e,t,n){e.removeEventListener(t,n,!1)}function A(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(y," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(y," ")}}function B(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return w.defaultView&&w.defaultView.getComputedStyle?n=w.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function M(e,t,n){if(e){var o=e.getElementsByTagName(t),a=0,i=o.length;if(n)for(;a<i;a++)n(o[a],a);return o}return[]}function L(e,t,n,a,i,r,s){var l=w.createEvent("Event"),c=(e||t[_]).options,d="on"+n.charAt(0).toUpperCase()+n.substr(1);l.initEvent(n,!0,!0),l.to=t,l.from=i||t,l.item=a||t,l.clone=o,l.oldIndex=r,l.newIndex=s,t.dispatchEvent(l),c[d]&&c[d].call(e,l)}function I(e,t,n,o,a,i){var r,s,l=e[_],c=l.options.onMove;return(r=w.createEvent("Event")).initEvent("move",!0,!0),r.to=t,r.from=e,r.dragged=n,r.draggedRect=o,r.related=a||t,r.relatedRect=i||t.getBoundingClientRect(),e.dispatchEvent(r),c&&(s=c.call(l,r)),s}function Y(e){e.draggable=!1}function X(){O=!1}function W(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function z(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&H(e,t)&&n++;return n}function H(e,t){if(e){var n=(t=t.split(".")).shift().toUpperCase(),o=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==n&&e.nodeName.toUpperCase()!=n||t.length&&((" "+e.className+" ").match(o)||[]).length!=t.length)}return!1}function V(e,t){var n,o;return function(){void 0===n&&(n=arguments,o=this,setTimeout((function(){1===n.length?e.call(o,n[0]):e.apply(o,n),n=void 0}),t))}}function K(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}return j.prototype={constructor:j,_onTapStart:function(e){var t=this,n=this.el,o=this.options,a=e.type,i=e.touches&&e.touches[0],r=(i||e).target,s=r,l=o.filter;if(!("mousedown"===a&&0!==e.button||o.disabled)&&(r=N(r,o.draggable,n))){if(u=z(r,o.draggable),"function"==typeof l){if(l.call(this,e,r,this))return L(t,s,"filter",r,n,u),void e.preventDefault()}else if(l&&(l=l.split(",").some((function(e){if(e=N(s,e.trim(),n))return L(t,e,"filter",r,n,u),!0}))))return void e.preventDefault();o.handle&&!N(s,o.handle,n)||this._prepareDragStart(e,i,r)}},_prepareDragStart:function(n,o,r){var s,l=this,c=l.el,d=l.options,u=c.ownerDocument;r&&!e&&r.parentNode===c&&(h=n,a=c,t=(e=r).parentNode,i=e.nextSibling,p=d.group,s=function(){l._disableDelayedDrag(),e.draggable=!0,A(e,l.options.chosenClass,!0),l._triggerDragStart(o)},d.ignore.split(",").forEach((function(t){M(e,t.trim(),Y)})),R(u,"mouseup",l._onDrop),R(u,"touchend",l._onDrop),R(u,"touchcancel",l._onDrop),d.delay?(R(u,"mouseup",l._disableDelayedDrag),R(u,"touchend",l._disableDelayedDrag),R(u,"touchcancel",l._disableDelayedDrag),R(u,"mousemove",l._disableDelayedDrag),R(u,"touchmove",l._disableDelayedDrag),l._dragStartTimer=setTimeout(s,d.delay)):s())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),U(e,"mouseup",this._disableDelayedDrag),U(e,"touchend",this._disableDelayedDrag),U(e,"touchcancel",this._disableDelayedDrag),U(e,"mousemove",this._disableDelayedDrag),U(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){t?(h={target:e,clientX:t.clientX,clientY:t.clientY},this._onDragStart(h,"touch")):this.nativeDraggable?(R(e,"dragend",this),R(a,"dragstart",this._onDragStart)):this._onDragStart(h,!0);try{w.selection?setTimeout((function(){w.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){a&&e&&(A(e,this.options.ghostClass,!0),j.active=this,L(this,a,"start",e,a,u))},_emulateDragOver:function(){if(m){if(this._lastX===m.clientX&&this._lastY===m.clientY)return;this._lastX=m.clientX,this._lastY=m.clientY,E||B(n,"display","none");var e=w.elementFromPoint(m.clientX,m.clientY),t=e,o=" "+this.options.group.name,a=x.length;if(t)do{if(t[_]&&t[_].options.groups.indexOf(o)>-1){for(;a--;)x[a]({clientX:m.clientX,clientY:m.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);E||B(n,"display","")}},_onTouchMove:function(e){if(h){j.active||this._dragStarted(),this._appendGhost();var t=e.touches?e.touches[0]:e,o=t.clientX-h.clientX,a=t.clientY-h.clientY,i=e.touches?"translate3d("+o+"px,"+a+"px,0)":"translate("+o+"px,"+a+"px)";b=!0,m=t,B(n,"webkitTransform",i),B(n,"mozTransform",i),B(n,"msTransform",i),B(n,"transform",i),e.preventDefault()}},_appendGhost:function(){if(!n){var t,o=e.getBoundingClientRect(),i=B(e),r=this.options;A(n=e.cloneNode(!0),r.ghostClass,!1),A(n,r.fallbackClass,!0),B(n,"top",o.top-S(i.marginTop,10)),B(n,"left",o.left-S(i.marginLeft,10)),B(n,"width",o.width),B(n,"height",o.height),B(n,"opacity","0.8"),B(n,"position","fixed"),B(n,"zIndex","100000"),B(n,"pointerEvents","none"),r.fallbackOnBody&&w.body.appendChild(n)||a.appendChild(n),t=n.getBoundingClientRect(),B(n,"width",2*o.width-t.width),B(n,"height",2*o.height-t.height)}},_onDragStart:function(t,n){var i=t.dataTransfer,r=this.options;this._offUpEvents(),"clone"==p.pull&&(B(o=e.cloneNode(!0),"display","none"),a.insertBefore(o,e)),n?("touch"===n?(R(w,"touchmove",this._onTouchMove),R(w,"touchend",this._onDrop),R(w,"touchcancel",this._onDrop)):(R(w,"mousemove",this._onTouchMove),R(w,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(i&&(i.effectAllowed="move",r.setData&&r.setData.call(this,i,e)),R(w,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(r){var s,u,f,h=this.el,m=this.options,g=m.group,v=g.put,y=p===g,D=m.sort;if(void 0!==r.preventDefault&&(r.preventDefault(),!m.dragoverBubble&&r.stopPropagation()),b=!0,p&&!m.disabled&&(y?D||(f=!a.contains(e)):p.pull&&v&&(p.name===g.name||v.indexOf&&~v.indexOf(p.name)))&&(void 0===r.rootEl||r.rootEl===this.el)){if($(r,m,this.el),O)return;if(s=N(r.target,m.draggable,h),u=e.getBoundingClientRect(),f)return P(!0),void(o||i?a.insertBefore(e,o||i):D||a.appendChild(e));if(0===h.children.length||h.children[0]===n||h===r.target&&(s=function(e,t){var n=e.lastElementChild,o=n.getBoundingClientRect();return(t.clientY-(o.top+o.height)>5||t.clientX-(o.right+o.width)>5)&&n}(h,r))){if(s){if(s.animated)return;S=s.getBoundingClientRect()}P(y),!1!==I(a,h,e,u,s,S)&&(e.contains(h)||(h.appendChild(e),t=h),this._animate(u,e),s&&this._animate(S,s))}else if(s&&!s.animated&&s!==e&&void 0!==s.parentNode[_]){l!==s&&(l=s,c=B(s),d=B(s.parentNode));var w,S=s.getBoundingClientRect(),C=S.right-S.left,E=S.bottom-S.top,T=/left|right|inline/.test(c.cssFloat+c.display)||"flex"==d.display&&0===d["flex-direction"].indexOf("row"),x=s.offsetWidth>e.offsetWidth,k=s.offsetHeight>e.offsetHeight,j=(T?(r.clientX-S.left)/C:(r.clientY-S.top)/E)>.5,R=s.nextElementSibling,U=I(a,h,e,u,s,S);if(!1!==U){if(O=!0,setTimeout(X,30),P(y),1===U||-1===U)w=1===U;else if(T){var A=e.offsetTop,M=s.offsetTop;w=A===M?s.previousElementSibling===e&&!x||j&&x:M>A}else w=R!==e&&!k||j&&k;e.contains(h)||(w&&!R?h.appendChild(e):s.parentNode.insertBefore(e,w?R:s)),t=e.parentNode,this._animate(u,e),this._animate(S,s)}}}},_animate:function(e,t){var n=this.options.animation;if(n){var o=t.getBoundingClientRect();B(t,"transition","none"),B(t,"transform","translate3d("+(e.left-o.left)+"px,"+(e.top-o.top)+"px,0)"),t.offsetWidth,B(t,"transition","all "+n+"ms"),B(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout((function(){B(t,"transition",""),B(t,"transform",""),t.animated=!1}),n)}},_offUpEvents:function(){var e=this.el.ownerDocument;U(w,"touchmove",this._onTouchMove),U(e,"mouseup",this._onDrop),U(e,"touchend",this._onDrop),U(e,"touchcancel",this._onDrop)},_onDrop:function(r){var s=this.el,l=this.options;clearInterval(this._loopId),clearInterval(v.pid),clearTimeout(this._dragStartTimer),U(w,"mousemove",this._onTouchMove),this.nativeDraggable&&(U(w,"drop",this),U(s,"dragstart",this._onDragStart)),this._offUpEvents(),r&&(b&&(r.preventDefault(),!l.dropBubble&&r.stopPropagation()),n&&n.parentNode.removeChild(n),e&&(this.nativeDraggable&&U(e,"dragend",this),Y(e),A(e,this.options.ghostClass,!1),A(e,this.options.chosenClass,!1),a!==t?(f=z(e,l.draggable))>=0&&(L(null,t,"sort",e,a,u,f),L(this,a,"sort",e,a,u,f),L(null,t,"add",e,a,u,f),L(this,a,"remove",e,a,u,f)):(o&&o.parentNode.removeChild(o),e.nextSibling!==i&&(f=z(e,l.draggable))>=0&&(L(this,a,"update",e,a,u,f),L(this,a,"sort",e,a,u,f))),j.active&&(null!=f&&-1!==f||(f=u),L(this,a,"end",e,a,u,f),this.save()))),this._nulling()},_nulling:function(){j.active===this&&(a=e=t=n=i=o=r=s=h=m=b=f=l=c=p=j.active=null)},handleEvent:function(t){var n=t.type;"dragover"===n||"dragenter"===n?e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.preventDefault()}(t)):"drop"!==n&&"dragend"!==n||this._onDrop(t)},toArray:function(){for(var e,t=[],n=this.el.children,o=0,a=n.length,i=this.options;o<a;o++)N(e=n[o],i.draggable,this.el)&&t.push(e.getAttribute(i.dataIdAttr)||W(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,o){var a=n.children[o];N(a,this.options.draggable,n)&&(t[e]=a)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return N(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&k(n)},destroy:function(){var e=this.el;e[_]=null,U(e,"mousedown",this._onTapStart),U(e,"touchstart",this._onTapStart),this.nativeDraggable&&(U(e,"dragover",this),U(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),x.splice(x.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},j.utils={on:R,off:U,css:B,find:M,is:function(e,t){return!!N(e,t,e)},extend:K,throttle:V,closest:N,toggleClass:A,index:z},j.create=function(e,t){return new j(e,t)},j.version="1.4.2",j}));
