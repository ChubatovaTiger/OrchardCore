{
  "name": "ComingSoon",
  "displayName": "Coming Soon",
  "description": "Coming Soon website.",
  "author": "The Orchard Team",
  "website": "http://orchardproject.net",
  "version": "2.0",
  "issetuprecipe": true,
  "categories": [ "default" ],
  "tags": [ "comingsoon" ],

  // The variables are evaluated the first time they are accessed, and reused across steps
  "variables": {
    "comingSoonContentItemId": "[js:uuid()]",
    "workflowTypeId": "[js:uuid()]",
    "workflowActivityId": "[js:uuid()]",
    "now": "[js: new Date().toISOString()]"
  },

  "steps": [
    {
      "name": "Feature",
      "disable": [
      ],
      "enable": [
        "OrchardCore.Settings",
        "OrchardCore.Admin",
        "OrchardCore.Liquid",
        "OrchardCore.Contents",
        "OrchardCore.ContentTypes",
        "OrchardCore.Alias",
        "OrchardCore.Autoroute",
        "OrchardCore.ContentFields",
        "OrchardCore.ContentPreview",
        "OrchardCore.Deployment",
        "OrchardCore.Diagnostics",
        "OrchardCore.DynamicCache",
        "OrchardCore.Resources",
        "OrchardCore.Features",
        "OrchardCore.Widgets",
        "OrchardCore.Flows",
        "OrchardCore.Forms",
        "OrchardCore.HomeRoute",
        "OrchardCore.Html",
        "OrchardCore.Scripting",
        "OrchardCore.Localization",
        "OrchardCore.Title",
        "OrchardCore.Navigation",
        "OrchardCore.Roles",
        "OrchardCore.Users",
        "OrchardCore.Recipes",
        "OrchardCore.Templates",
        "OrchardCore.Tenants",
        "OrchardCore.Themes",
        "OrchardCore.Workflows",
        "OrchardCore.Workflows.Http",
        "SafeMode",
        "TheAdmin",
        "TheComingSoonTheme",
        "TheTheme"
      ]
    },
    {
      "name": "themes",
      "admin": "TheAdmin",
      "site": "TheComingSoonTheme"
    },
    {
      "name": "settings",
      "HomeRoute": {
        "Action": "Display",
        "Controller": "Item",
        "Area": "OrchardCore.Contents",
        "ContentItemId": "[js: variables('comingSoonContentItemId')]"
      }
    },
    {
      "name": "content",
      "data": [
        {
          "ContentItemId": "[js: variables('comingSoonContentItemId')]",
          "ContentItemVersionId": "4kt5rnaa8vqaeyahg5cbmb62w2",
          "ContentType": "ComingSoon",
          "DisplayText": "Coming Soon",
          "Latest": true,
          "Published": true,
          "ModifiedUtc": "[js: variables('now')]",
          "PublishedUtc": "[js: variables('now')]",
          "CreatedUtc": "[js: variables('now')]",
          "Owner": "admin",
          "Author": "admin",
          "ComingSoon": {},
          "AutoroutePart": {
            "Path": null,
            "SetHomepage": true
          },
          "TitlePart": {
            "Title": "Coming Soon"
          },
          "HtmlBodyPart": {
            "Html": "\r\n<div class=\"input-group input-group-newsletter\">\r\n                <input class=\"form-control\" aria-describedby=\"basic-addon\" aria-label=\"Enter email...\" type=\"email\" placeholder=\"Enter email...\">\r\n                <div class=\"input-group-append\">\r\n                  <button class=\"btn btn-secondary\" type=\"button\">Notify Me!</button>\r\n                </div>\r\n              </div>"
          },
          "SocialIcons": {
            "ContentItems": [
              {
                "Id": 0,
                "ContentItemId": "4gjxgam51tfyf5vhj02zhvqecb",
                "ContentItemVersionId": null,
                "ContentType": "SocialIcon",
                "DisplayText": null,
                "Latest": false,
                "Published": false,
                "Owner": null,
                "Author": "admin",
                "SocialIcon": {
                  "IconClass": {
                    "Text": "fa fa-twitter"
                  },
                  "Link": {
                    "Url": "https://twitter.com",
                    "Text": "Twitter"
                  }
                }
              },
              {
                "Id": 0,
                "ContentItemId": "4e73aztdqsycs0ygegr02rjkx1",
                "ContentItemVersionId": null,
                "ContentType": "SocialIcon",
                "DisplayText": null,
                "Latest": false,
                "Published": false,
                "Owner": null,
                "Author": "admin",
                "SocialIcon": {
                  "IconClass": {
                    "Text": "fa fa-facebook"
                  },
                  "Link": {
                    "Url": "https://facebook.com",
                    "Text": "Facebook"
                  }
                }
              },
              {
                "Id": 0,
                "ContentItemId": "4kn15ap88bg611z3ynjvewxpdz",
                "ContentItemVersionId": null,
                "ContentType": "SocialIcon",
                "DisplayText": null,
                "Latest": false,
                "Published": false,
                "Owner": null,
                "Author": "admin",
                "SocialIcon": {
                  "IconClass": {
                    "Text": "fa fa-instagram"
                  },
                  "Link": {
                    "Url": "https://instagram.com",
                    "Text": "Instagram"
                  }
                }
              }
            ]
          },
          "FlowPart": {
            "Widgets": [
              {
                "Id": 0,
                "ContentItemId": "4ywpx1bab0e2t7n33zxhejwv5r",
                "ContentItemVersionId": null,
                "ContentType": "ValidationSummary",
                "DisplayText": null,
                "Latest": false,
                "Published": false,
                "Owner": null,
                "Author": "admin",
                "ValidationSummaryPart": {},
                "FlowMetadata": {
                  "Alignment": 3,
                  "Size": 100
                }
              },
              {
                "Id": 0,
                "ContentItemId": "4b9w1xee8bwr0tjnn455wn9fwb",
                "ContentItemVersionId": null,
                "ContentType": "Register",
                "DisplayText": null,
                "Latest": false,
                "Published": false,
                "Owner": null,
                "Author": "admin",
                "Register": {
                  "Placeholder": {
                    "Text": "enter your email...."
                  },
                  "Button": {
                    "Text": "NOTIFY ME!"
                  },
                  "InputFieldName": {
                    "Text": "Email"
                  }
                },
                "HtmlBodyPart": {
                  "Html": "<p class=\"mb-5\">We're working hard to finish the development of this site. Our target launch date is\r\n                <strong>January 2019</strong>! Sign up for updates using the form below!</p>"
                },
                "FlowMetadata": {
                  "Alignment": 3,
                  "Size": 100
                }
              },
              {
                "Id": 0,
                "ContentItemId": "4tnv3pbfg0wpn7r9vv9tmfg6nm",
                "ContentItemVersionId": null,
                "ContentType": "NoCaptcha",
                "DisplayText": null,
                "Latest": false,
                "Published": false,
                "Owner": null,
                "Author": "admin",
                "NoCaptchaPart": {},
                "FlowMetadata": {
                  "Alignment": 3,
                  "Size": 100
                }
              }
            ]
          },
          "FormPart": {
            "Action": "[js: '/workflows/invoke/' + encodeURI(createWorkflowToken(variables('workflowTypeId'), variables('workflowActivityId')))]",
            "Method": "POST"
          }
        }
      ]
    },
    {
      "name": "ContentDefinition",
      "ContentTypes": [
        {
          "Name": "ComingSoon",
          "DisplayName": "Coming Soon",
          "Settings": {
            "Creatable": "True",
            "Draftable": "True",
            "Versionable": "True",
            "Listable": "True",
            "Securable": "True",
            "Stereotype": null
          },
          "ContentTypePartDefinitionRecords": [
            {
              "PartName": "ComingSoon",
              "Name": "ComingSoon",
              "Settings": {
                "Position": "4"
              }
            },
            {
              "PartName": "AutoroutePart",
              "Name": "AutoroutePart",
              "Settings": {
                "Position": "1",
                "Pattern": null,
                "AllowCustomPath": "False",
                "ShowHomepageOption": "True"
              }
            },
            {
              "PartName": "TitlePart",
              "Name": "TitlePart",
              "Settings": {
                "Position": "0"
              }
            },
            {
              "PartName": "BagPart",
              "Name": "SocialIcons",
              "Settings": {
                "DisplayName": "Social Icons",
                "Description": "The list of social icons to display in the Coming Soon page",
                "Position": "5",
                "ContainedContentTypes": [
                  "SocialIcon"
                ],
                "DisplayType": null
              }
            },
            {
              "PartName": "FlowPart",
              "Name": "FlowPart",
              "Settings": {
                "Position": "3"
              }
            },
            {
              "PartName": "FormPart",
              "Name": "FormPart",
              "Settings": {
                "Position": "2"
              }
            }
          ]
        },
        {
          "Name": "SocialIcon",
          "DisplayName": "Social Icon",
          "Settings": {
            "Creatable": "False",
            "Draftable": "False",
            "Versionable": "False",
            "Listable": "False",
            "Securable": "False",
            "Stereotype": null
          },
          "ContentTypePartDefinitionRecords": [
            {
              "PartName": "SocialIcon",
              "Name": "SocialIcon",
              "Settings": {
                "Position": "0"
              }
            }
          ]
        },
        {
          "Name": "Register",
          "DisplayName": "Register",
          "Settings": {
            "Creatable": "False",
            "Draftable": "False",
            "Versionable": "False",
            "Listable": "False",
            "Securable": "False",
            "Stereotype": "Widget"
          },
          "ContentTypePartDefinitionRecords": [
            {
              "PartName": "Register",
              "Name": "Register",
              "Settings": {
                "Position": "1"
              }
            },
            {
              "PartName": "HtmlBodyPart",
              "Name": "HtmlBodyPart",
              "Settings": {
                "DisplayName": null,
                "Description": null,
                "Editor": "Wysiwyg",
                "HtmlBodyPartSettings": {},
                "Position": "0"
              }
            }
          ]
        }
      ],
      "ContentParts": [
        {
          "Name": "SocialIcon",
          "Settings": {},
          "ContentPartFieldDefinitionRecords": [
            {
              "FieldName": "TextField",
              "Name": "IconClass",
              "Settings": {
                "DisplayName": "Icon Class",
                "Editor": null,
                "Hint": "The icon class to use",
                "Position": "0"
              }
            },
            {
              "FieldName": "LinkField",
              "Name": "Link",
              "Settings": {
                "DisplayName": "Link",
                "Editor": null,
                "Hint": null,
                "HintLinkText": null,
                "Required": false,
                "LinkTextMode": 0,
                "UrlPlaceholder": null,
                "TextPlaceholder": null,
                "DefaultUrl": null,
                "DefaultText": null,
                "Position": "1"
              }
            }
          ]
        },
        {
          "Name": "Register",
          "Settings": {},
          "ContentPartFieldDefinitionRecords": [
            {
              "FieldName": "TextField",
              "Name": "Placeholder",
              "Settings": {
                "DisplayName": "Placeholder",
                "Editor": null,
                "Hint": "The text to display in the input field",
                "Position": "0"
              }
            },
            {
              "FieldName": "TextField",
              "Name": "Button",
              "Settings": {
                "DisplayName": "Button",
                "Editor": null,
                "Hint": "text to display on submit button",
                "Position": "2"
              }
            },
            {
              "FieldName": "TextField",
              "Name": "InputFieldName",
              "Settings": {
                "DisplayName": "InputFieldName",
                "Editor": null,
                "Hint": "The name of the input field",
                "Position": "1"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Templates",
      "Templates": {
        "Content__ComingSoon": {
          "Description": "Coming Soon Template",
          "Content": "[file:text('Snippets/Content__ComingSoon.liquid')]"
        },
        "Widget__Register": {
          "Description": "Register email widget",
          "Content": "[file:text('Snippets/Widget__Register.liquid')]"
        }
      }
    },
    {
      "name": "WorkflowType",
      "data": [
        {
          "WorkflowTypeId": "[js: variables('workflowTypeId')]",
          "Name": "User Registration",
          "IsEnabled": true,
          "IsSingleton": false,
          "DeleteFinishedWorkflows": false,
          "Activities": [
            {
              "ActivityId": "[js: variables('workflowActivityId')]",
              "Name": "HttpRequestEvent",
              "X": 0,
              "Y": 0,
              "IsStart": true,
              "Properties": {
                "ActivityMetadata": {
                  "Title": "Handle User Registration"
                },
                "HttpMethod": "POST",
                //"Url": "/Workflows/Invoke?token=CfDJ8PxIMEGXH9tPufrlIl0ucMtqkmvSOC_J8fXkCW8OfTDAQjpz0ZG3Umz5IEXdInOkdJkZGbcf9vizlZXJiW21w5inLFmRd2HNeegloD8N4J0YZrKf9Dl5BqIhv8RO5wNohLbrkA8Nu-QXjZ39_PMWpW7ccjoAHcnRVFhB7KlIz2tezpE8IRAUZTx0tbKBxQeld8CYiFPpNCOQ7iYGoG98PfJFIIbUZ0MZaUjDcW5_fcBm",
                "ValidateAntiforgeryToken": true
              }
            },
            {
              "ActivityId": "4gq1ch13zvjb56rrng70w55cmz",
              "Name": "BindModelStateTask",
              "X": 330,
              "Y": 0,
              "IsStart": false,
              "Properties": {
                "ActivityMetadata": {
                  "Title": "Bind Form to Model State"
                }
              }
            },
            {
              "ActivityId": "4whqxbdn0d42524swmh49era4x",
              "Name": "ForkTask",
              "X": 660,
              "Y": 10,
              "IsStart": false,
              "Properties": {
                "ActivityMetadata": {
                  "Title": "Validate Form Fields"
                },
                "Forks": [
                  "Validate Email",
                  "Validate NoCaptcha"
                ]
              }
            },
            {
              "ActivityId": "4rrw4wj985j05sns4h4m35vk53",
              "Name": "ValidateFormFieldTask",
              "X": 350,
              "Y": 130,
              "IsStart": false,
              "Properties": {
                "FieldName": "Email",
                "ErrorMessage": "this is not a valid email",
                "ActivityMetadata": {
                  "Title": "Validate Email"
                }
              }
            },
            {
              "ActivityId": "45gqn0c34pnzv0e0z5anc3dpmk",
              "Name": "ValidateNoCaptchaTask",
              "X": 1110,
              "Y": 90,
              "IsStart": false,
              "Properties": {
                "ActivityMetadata": {
                  "Title": null
                }
              }
            },
            {
              "ActivityId": "44sfg8spe6xfg67t4arp5wbedn",
              "Name": "JoinTask",
              "X": 660,
              "Y": 190,
              "IsStart": false,
              "Properties": {
                "ActivityMetadata": {
                  "Title": "Join Validated Form Fields"
                },
                "Mode": 0
              }
            },
            {
              "ActivityId": "4pa4dakwbjt3w401sz726yg0ce",
              "Name": "ValidateFormTask",
              "X": 370,
              "Y": 250,
              "IsStart": false,
              "Properties": {
                "ActivityMetadata": {
                  "Title": null
                }
              }
            },
            {
              "ActivityId": "4h209bxt4e3yj73a9kk4dgtmcn",
              "Name": "RegisterUserTask",
              "X": 1080,
              "Y": 410,
              "IsStart": false,
              "Properties": {
                "ActivityMetadata": {
                  "Title": "Register User"
                }
              }
            },
            {
              "ActivityId": "4pfedcmhy0ka66t6bds315vxw5",
              "Name": "HttpRedirectTask",
              "X": 400,
              "Y": 440,
              "IsStart": false,
              "Properties": {
                "ActivityMetadata": {
                  "Title": "Homepage"
                },
                "Location": {
                  "Expression": "/"
                },
                "Permanent": false
              }
            }
          ],
          "Transitions": [
            {
              "Id": 0,
              "SourceActivityId": "426zsv4abp93qv40cyqpkskpnc",
              "SourceOutcomeName": "Done",
              "DestinationActivityId": "4gq1ch13zvjb56rrng70w55cmz"
            },
            {
              "Id": 0,
              "SourceActivityId": "4gq1ch13zvjb56rrng70w55cmz",
              "SourceOutcomeName": "Done",
              "DestinationActivityId": "4whqxbdn0d42524swmh49era4x"
            },
            {
              "Id": 0,
              "SourceActivityId": "4whqxbdn0d42524swmh49era4x",
              "SourceOutcomeName": "Validate NoCaptcha",
              "DestinationActivityId": "45gqn0c34pnzv0e0z5anc3dpmk"
            },
            {
              "Id": 0,
              "SourceActivityId": "4whqxbdn0d42524swmh49era4x",
              "SourceOutcomeName": "Validate Email",
              "DestinationActivityId": "4rrw4wj985j05sns4h4m35vk53"
            },
            {
              "Id": 0,
              "SourceActivityId": "4rrw4wj985j05sns4h4m35vk53",
              "SourceOutcomeName": "Done",
              "DestinationActivityId": "44sfg8spe6xfg67t4arp5wbedn"
            },
            {
              "Id": 0,
              "SourceActivityId": "45gqn0c34pnzv0e0z5anc3dpmk",
              "SourceOutcomeName": "Done",
              "DestinationActivityId": "44sfg8spe6xfg67t4arp5wbedn"
            },
            {
              "Id": 0,
              "SourceActivityId": "44sfg8spe6xfg67t4arp5wbedn",
              "SourceOutcomeName": "Joined",
              "DestinationActivityId": "4pa4dakwbjt3w401sz726yg0ce"
            },
            {
              "Id": 0,
              "SourceActivityId": "4pa4dakwbjt3w401sz726yg0ce",
              "SourceOutcomeName": "Valid",
              "DestinationActivityId": "4h209bxt4e3yj73a9kk4dgtmcn"
            },
            {
              "Id": 0,
              "SourceActivityId": "4pa4dakwbjt3w401sz726yg0ce",
              "SourceOutcomeName": "Invalid",
              "DestinationActivityId": "4pfedcmhy0ka66t6bds315vxw5"
            },
            {
              "Id": 0,
              "SourceActivityId": "4h209bxt4e3yj73a9kk4dgtmcn",
              "SourceOutcomeName": "Done",
              "DestinationActivityId": "4pfedcmhy0ka66t6bds315vxw5"
            }
          ]
        }
      ]
    }
  ]
}